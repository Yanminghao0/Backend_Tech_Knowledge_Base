# äºŒåˆ†æŸ¥æ‰¾ï¼ˆBinary Searchï¼‰

> åœ¨æœ‰åºæ•°ç»„ä¸­é«˜æ•ˆæŸ¥æ‰¾ç›®æ ‡å€¼ï¼Œæ—¶é—´å¤æ‚åº¦O(log n)

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

- **ç±»å‹**: æŸ¥æ‰¾ç®—æ³•
- **æ—¶é—´å¤æ‚åº¦**: O(log n)
- **ç©ºé—´å¤æ‚åº¦**: O(1) - è¿­ä»£æ³•ï¼ŒO(log n) - é€’å½’æ³•
- **é€‚ç”¨æ¡ä»¶**: 
  - âœ… æ•°ç»„å¿…é¡»æœ‰åº
  - âœ… æ”¯æŒéšæœºè®¿é—®ï¼ˆæ•°ç»„ï¼‰
- **æ ¸å¿ƒæ€æƒ³**: æ¯æ¬¡å°†æœç´¢åŒºé—´ç¼©å°ä¸€åŠ

---

## ğŸ¯ ç®—æ³•åŸç†

### 1. åŸºæœ¬æ€è·¯
1. å–ä¸­é—´ä½ç½® mid = (left + right) / 2
2. æ¯”è¾ƒ arr[mid] ä¸ target
3. ç›¸ç­‰åˆ™æ‰¾åˆ°ï¼Œè¿”å›ç´¢å¼•
4. arr[mid] < targetï¼Œåœ¨å³åŠéƒ¨åˆ†æŸ¥æ‰¾
5. arr[mid] > targetï¼Œåœ¨å·¦åŠéƒ¨åˆ†æŸ¥æ‰¾
6. é‡å¤ç›´åˆ°æ‰¾åˆ°æˆ–åŒºé—´ä¸ºç©º

### 2. æ ¸å¿ƒæµç¨‹å›¾
```mermaid
graph TD
    A[å¼€å§‹] --> B[åˆå§‹åŒ– left=0, right=n-1]
    B --> C{left <= right?}
    C -- æ˜¯ --> D[è®¡ç®— mid = left + (right-left)/2]
    D --> E{arr[mid] == target?}
    E -- æ˜¯ --> F[è¿”å› midï¼ŒæŸ¥æ‰¾æˆåŠŸ]
    E -- å¦ --> G{arr[mid] < target?}
    G -- æ˜¯ --> H[left = mid + 1]
    G -- å¦ --> I[right = mid - 1]
    H --> C
    I --> C
    C -- å¦ --> J[è¿”å› -1ï¼ŒæŸ¥æ‰¾å¤±è´¥]
    F --> K[ç»“æŸ]
    J --> K
```

### 3. æ—¶é—´å¤æ‚åº¦æ¨å¯¼
- æ¯æ¬¡æŸ¥æ‰¾å°†é—®é¢˜è§„æ¨¡å‡åŠ
- T(n) = T(n/2) + O(1)
- è§£å¾— T(n) = O(log n)

---

## ğŸ’» ä»£ç å®ç°

### 1. åŸºç¡€æ¨¡æ¿ï¼ˆé—­åŒºé—´ [left, right]ï¼‰

```java
/**
 * æ ‡å‡†äºŒåˆ†æŸ¥æ‰¾
 * åœ¨æœ‰åºæ•°ç»„ä¸­æŸ¥æ‰¾targetï¼Œè¿”å›ç´¢å¼•ï¼Œä¸å­˜åœ¨è¿”å›-1
 */
public int binarySearch(int[] nums, int target) {
    int left = 0;
    int right = nums.length - 1; // é—­åŒºé—´
    
    while (left <= right) {  // æ³¨æ„æ˜¯ <=
        int mid = left + (right - left) / 2; // é˜²æ­¢æº¢å‡º
        
        if (nums[mid] == target) {
            return mid;  // æ‰¾åˆ°ç›®æ ‡
        } else if (nums[mid] < target) {
            left = mid + 1;  // ç›®æ ‡åœ¨å³åŠéƒ¨åˆ†
        } else {
            right = mid - 1; // ç›®æ ‡åœ¨å·¦åŠéƒ¨åˆ†
        }
    }
    
    return -1; // æœªæ‰¾åˆ°
}
```

### 2. å·¦é—­å³å¼€åŒºé—´æ¨¡æ¿ [left, right)

```java
/**
 * äºŒåˆ†æŸ¥æ‰¾ï¼ˆå·¦é—­å³å¼€åŒºé—´ï¼‰
 */
public int binarySearchLeftOpen(int[] nums, int target) {
    int left = 0;
    int right = nums.length; // å·¦é—­å³å¼€
    
    while (left < right) {  // æ³¨æ„æ˜¯ <
        int mid = left + (right - left) / 2;
        
        if (nums[mid] == target) {
            return mid;
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid;  // ä¸åŒ…å«rightï¼Œæ‰€ä»¥æ˜¯midè€Œä¸æ˜¯mid-1
        }
    }
    
    return -1;
}
```

### 3. é€’å½’å®ç°

```java
/**
 * äºŒåˆ†æŸ¥æ‰¾ï¼ˆé€’å½’ç‰ˆæœ¬ï¼‰
 */
public int binarySearchRecursive(int[] nums, int target) {
    return binarySearchHelper(nums, target, 0, nums.length - 1);
}

private int binarySearchHelper(int[] nums, int target, int left, int right) {
    if (left > right) {
        return -1;  // é€’å½’ç»ˆæ­¢æ¡ä»¶
    }
    
    int mid = left + (right - left) / 2;
    
    if (nums[mid] == target) {
        return mid;
    } else if (nums[mid] < target) {
        return binarySearchHelper(nums, target, mid + 1, right);
    } else {
        return binarySearchHelper(nums, target, left, mid - 1);
    }
}
```

---

## ğŸ“Š ç»å…¸å˜ç§é—®é¢˜

### 1. æŸ¥æ‰¾ç¬¬ä¸€ä¸ªç­‰äºtargetçš„ä½ç½®

```java
/**
 * LeetCode 34: åœ¨æ’åºæ•°ç»„ä¸­æŸ¥æ‰¾å…ƒç´ çš„ç¬¬ä¸€ä¸ªä½ç½®
 */
public int findFirst(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    int result = -1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] == target) {
            result = mid;      // è®°å½•ç»“æœ
            right = mid - 1;   // ç»§ç»­å‘å·¦æŸ¥æ‰¾
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }
    
    return result;
}
```

### 2. æŸ¥æ‰¾æœ€åä¸€ä¸ªç­‰äºtargetçš„ä½ç½®

```java
/**
 * æŸ¥æ‰¾æœ€åä¸€ä¸ªç­‰äºtargetçš„ä½ç½®
 */
public int findLast(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    int result = -1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] == target) {
            result = mid;      // è®°å½•ç»“æœ
            left = mid + 1;    // ç»§ç»­å‘å³æŸ¥æ‰¾
        } else if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid - 1;
        }
    }
    
    return result;
}
```

### 3. æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºç­‰äºtargetçš„ä½ç½®ï¼ˆlower_boundï¼‰

```java
/**
 * æŸ¥æ‰¾ç¬¬ä¸€ä¸ª >= target çš„ä½ç½®
 * è¿”å›æ’å…¥ä½ç½®
 */
public int lowerBound(int[] nums, int target) {
    int left = 0, right = nums.length;
    
    while (left < right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] < target) {
            left = mid + 1;
        } else {
            right = mid;  // nums[mid] >= targetï¼Œå¯èƒ½æ˜¯ç­”æ¡ˆ
        }
    }
    
    return left; // leftå°±æ˜¯ç¬¬ä¸€ä¸ª>=targetçš„ä½ç½®
}
```

### 4. æŸ¥æ‰¾ç¬¬ä¸€ä¸ªå¤§äºtargetçš„ä½ç½®ï¼ˆupper_boundï¼‰

```java
/**
 * æŸ¥æ‰¾ç¬¬ä¸€ä¸ª > target çš„ä½ç½®
 */
public int upperBound(int[] nums, int target) {
    int left = 0, right = nums.length;
    
    while (left < right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] <= target) {
            left = mid + 1;
        } else {
            right = mid;
        }
    }
    
    return left;
}
```

### 5. æ—‹è½¬æ•°ç»„ä¸­æŸ¥æ‰¾

```java
/**
 * LeetCode 33: æœç´¢æ—‹è½¬æ’åºæ•°ç»„
 * æ•°ç»„åœ¨æŸä¸ªç‚¹è¢«æ—‹è½¬ï¼ˆå¦‚[0,1,2,4,5,6,7]å˜ä¸º[4,5,6,7,0,1,2]ï¼‰
 */
public int searchRotated(int[] nums, int target) {
    int left = 0, right = nums.length - 1;
    
    while (left <= right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] == target) {
            return mid;
        }
        
        // åˆ¤æ–­å“ªä¸€åŠæ˜¯æœ‰åºçš„
        if (nums[left] <= nums[mid]) {
            // å·¦åŠéƒ¨åˆ†æœ‰åº
            if (nums[left] <= target && target < nums[mid]) {
                right = mid - 1;  // targetåœ¨å·¦åŠéƒ¨åˆ†
            } else {
                left = mid + 1;   // targetåœ¨å³åŠéƒ¨åˆ†
            }
        } else {
            // å³åŠéƒ¨åˆ†æœ‰åº
            if (nums[mid] < target && target <= nums[right]) {
                left = mid + 1;   // targetåœ¨å³åŠéƒ¨åˆ†
            } else {
                right = mid - 1;  // targetåœ¨å·¦åŠéƒ¨åˆ†
            }
        }
    }
    
    return -1;
}
```

### 6. å¯»æ‰¾å³°å€¼

```java
/**
 * LeetCode 162: å¯»æ‰¾å³°å€¼
 * å³°å€¼å…ƒç´ æ˜¯æŒ‡å…¶å€¼ä¸¥æ ¼å¤§äºå·¦å³ç›¸é‚»å€¼çš„å…ƒç´ 
 */
public int findPeakElement(int[] nums) {
    int left = 0, right = nums.length - 1;
    
    while (left < right) {
        int mid = left + (right - left) / 2;
        
        if (nums[mid] < nums[mid + 1]) {
            left = mid + 1;  // å³°å€¼åœ¨å³ä¾§
        } else {
            right = mid;     // å³°å€¼åœ¨å·¦ä¾§æˆ–å°±æ˜¯mid
        }
    }
    
    return left;
}
```

### 7. æœ€å°åŒ–æœ€å¤§å€¼é—®é¢˜

```java
/**
 * LeetCode 410: åˆ†å‰²æ•°ç»„çš„æœ€å¤§å€¼
 * äºŒåˆ†ç­”æ¡ˆï¼šå¯¹ç»“æœè¿›è¡ŒäºŒåˆ†æŸ¥æ‰¾
 */
public int splitArray(int[] nums, int k) {
    int left = 0, right = 0;
    
    // ç¡®å®šäºŒåˆ†èŒƒå›´
    for (int num : nums) {
        left = Math.max(left, num);    // æœ€å°å¯èƒ½ï¼šæœ€å¤§å…ƒç´ 
        right += num;                   // æœ€å¤§å¯èƒ½ï¼šæ‰€æœ‰å…ƒç´ å’Œ
    }
    
    // äºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆ
    while (left < right) {
        int mid = left + (right - left) / 2;
        
        if (canSplit(nums, k, mid)) {
            right = mid;  // å¯ä»¥åˆ†å‰²ï¼Œå°è¯•æ›´å°çš„å€¼
        } else {
            left = mid + 1;
        }
    }
    
    return left;
}

// åˆ¤æ–­æ˜¯å¦å¯ä»¥å°†æ•°ç»„åˆ†æˆkä¸ªå­æ•°ç»„ï¼Œæ¯ä¸ªå­æ•°ç»„å’Œä¸è¶…è¿‡maxSum
private boolean canSplit(int[] nums, int k, int maxSum) {
    int count = 1;
    int sum = 0;
    
    for (int num : nums) {
        if (sum + num > maxSum) {
            count++;
            sum = num;
        } else {
            sum += num;
        }
    }
    
    return count <= k;
}
```

---

## ğŸ” åº”ç”¨åœºæ™¯

### 1. æ•°æ®æŸ¥æ‰¾
- **æœ‰åºæ•°ç»„æŸ¥æ‰¾**: å­—å…¸ã€ç›®å½•
- **æ•°æ®åº“ç´¢å¼•**: Bæ ‘ç´¢å¼•æœ¬è´¨æ˜¯å¤šè·¯äºŒåˆ†æŸ¥æ‰¾
- **ç‰ˆæœ¬æ§åˆ¶**: Git bisectæŸ¥æ‰¾å¼•å…¥bugçš„æäº¤

### 2. æ±‚å€¼é—®é¢˜
- **æ±‚å¹³æ–¹æ ¹**: åœ¨[0, x]èŒƒå›´å†…äºŒåˆ†
- **æ±‚å¹‚è¿ç®—**: å¿«é€Ÿå¹‚ç®—æ³•
- **æ±‚è§£æ–¹ç¨‹**: æ•°å€¼è®¡ç®—ä¸­çš„äºŒåˆ†æ³•

### 3. æœ€ä¼˜åŒ–é—®é¢˜
- **æœ€å°åŒ–æœ€å¤§å€¼**: å¦‚åˆ†å‰²æ•°ç»„ã€æœ¨æåˆ‡å‰²
- **æœ€å¤§åŒ–æœ€å°å€¼**: å¦‚æœ€å¤§åŒ–æœ€å°è·ç¦»
- **äºŒåˆ†ç­”æ¡ˆ**: å°†åˆ¤å®šé—®é¢˜è½¬åŒ–ä¸ºæœç´¢é—®é¢˜

---

## âš ï¸ æ³¨æ„äº‹é¡¹

### 1. é˜²æ­¢æ•´æ•°æº¢å‡º

```java
// âŒ é”™è¯¯ï¼šå¯èƒ½æº¢å‡º
int mid = (left + right) / 2;

// âœ… æ­£ç¡®ï¼šé˜²æ­¢æº¢å‡º
int mid = left + (right - left) / 2;
// æˆ–è€…ä½¿ç”¨æ— ç¬¦å·å³ç§»
int mid = (left + right) >>> 1;
```

### 2. è¾¹ç•Œæ¡ä»¶é€‰æ‹©

```java
// é—­åŒºé—´ [left, right]
while (left <= right) {  // <=
    // ...
    right = mid - 1;  // -1
}

// å·¦é—­å³å¼€ [left, right)
while (left < right) {  // <
    // ...
    right = mid;  // ä¸éœ€è¦-1
}
```

### 3. å¾ªç¯ä¸å˜é‡
ä¿æŒæœç´¢åŒºé—´çš„å®šä¹‰ä¸€è‡´ï¼Œé¿å…æ­»å¾ªç¯

```java
// åŒºé—´å®šä¹‰ï¼š[left, right] ä¸­å¯èƒ½å­˜åœ¨target
// å¾ªç¯ä¸å˜é‡ï¼šæ¯æ¬¡è¿­ä»£åï¼Œtargetåœ¨[left, right]ä¸­æˆ–ä¸å­˜åœ¨
```

### 4. åˆ¤æ–­æ¡ä»¶
æ ¹æ®é¢˜ç›®è¦æ±‚é€‰æ‹©åˆé€‚çš„åˆ¤æ–­æ¡ä»¶

```java
// æŸ¥æ‰¾ç²¾ç¡®å€¼
if (nums[mid] == target) return mid;

// æŸ¥æ‰¾è¾¹ç•Œ
if (nums[mid] < target) {
    // ç›®æ ‡åœ¨å³ä¾§
} else {
    // ç›®æ ‡åœ¨å·¦ä¾§æˆ–å°±æ˜¯mid
}
```

---

## ğŸ“ æœ€ä½³å®è·µ

### 1. äºŒåˆ†æŸ¥æ‰¾ä¸‰è¦ç´ 
- **åˆå§‹åŒ–**: æ­£ç¡®è®¾ç½®leftå’Œright
- **å¾ªç¯æ¡ä»¶**: while (left <= right) æˆ– while (left < right)
- **æ›´æ–°æ“ä½œ**: left = mid + 1 æˆ– right = mid - 1

### 2. æ¨¡æ¿é€‰æ‹©
```java
// æ¨¡æ¿1ï¼šæŸ¥æ‰¾ç²¾ç¡®å€¼ï¼ˆé—­åŒºé—´ï¼‰
while (left <= right) {
    int mid = left + (right - left) / 2;
    if (nums[mid] == target) return mid;
    else if (nums[mid] < target) left = mid + 1;
    else right = mid - 1;
}

// æ¨¡æ¿2ï¼šæŸ¥æ‰¾è¾¹ç•Œï¼ˆå·¦é—­å³å¼€ï¼‰
while (left < right) {
    int mid = left + (right - left) / 2;
    if (check(mid)) right = mid;
    else left = mid + 1;
}
```

### 3. äºŒåˆ†ç­”æ¡ˆæŠ€å·§
å°†"æ±‚æœ€å€¼"è½¬åŒ–ä¸º"åˆ¤å®šé—®é¢˜"ï¼Œç„¶åäºŒåˆ†æŸ¥æ‰¾ç­”æ¡ˆ

### 4. è°ƒè¯•æŠ€å·§
æ‰“å°æ¯æ¬¡è¿­ä»£çš„leftã€rightã€midå€¼ï¼Œè§‚å¯Ÿæœç´¢åŒºé—´å˜åŒ–

---

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ |
|------|-----------|-----------|
| åŸºæœ¬äºŒåˆ†æŸ¥æ‰¾ | O(log n) | O(1) |
| é€’å½’äºŒåˆ†æŸ¥æ‰¾ | O(log n) | O(log n) |
| æŸ¥æ‰¾è¾¹ç•Œ | O(log n) | O(1) |
| æ—‹è½¬æ•°ç»„æŸ¥æ‰¾ | O(log n) | O(1) |

---

## ğŸ”— ç›¸å…³ä¸»é¢˜

- [æ•°ç»„](../æ•°æ®ç»“æ„/01_æ•°ç»„.md) - äºŒåˆ†æŸ¥æ‰¾çš„åŸºç¡€
- [å¿«é€Ÿæ’åº](../æ’åºç®—æ³•/06_å¿«é€Ÿæ’åº.md) - åŒæ ·åˆ©ç”¨åˆ†æ²»æ€æƒ³
- [å½’å¹¶æ’åº](../æ’åºç®—æ³•/05_å½’å¹¶æ’åº.md) - åˆ†æ²»ç®—æ³•
- [äºŒå‰æœç´¢æ ‘](../æ•°æ®ç»“æ„/07_äºŒå‰æœç´¢æ ‘.md) - æ ‘å½¢çš„äºŒåˆ†æŸ¥æ‰¾

---

> **å­¦ä¹ å»ºè®®**ï¼šäºŒåˆ†æŸ¥æ‰¾æ˜¯æœ€é‡è¦çš„ç®—æ³•ä¹‹ä¸€ï¼ŒåŠ¡å¿…æŒæ¡æ¨¡æ¿å’Œè¾¹ç•Œå¤„ç†ï¼Œèƒ½å¤Ÿå¤„ç†å„ç§å˜ç§é—®é¢˜