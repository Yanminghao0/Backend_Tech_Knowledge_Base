# åˆ†æ•°èƒŒåŒ…

> åˆ†æ•°èƒŒåŒ…é—®é¢˜æ˜¯ç»å…¸çš„èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜ï¼Œå…¶æ ¸å¿ƒæ€æƒ³æ˜¯é€šè¿‡è´ªå¿ƒç­–ç•¥å®ç°èµ„æºçš„æœ€ä¼˜é…ç½®ã€‚ä¸0-1èƒŒåŒ…é—®é¢˜ä¸åŒï¼Œåˆ†æ•°èƒŒåŒ…å…è®¸å–ç‰©å“çš„ä¸€éƒ¨åˆ†ï¼Œå› æ­¤å¯ä»¥é€šè¿‡æŒ‰å•ä½ä»·å€¼æ’åºçš„è´ªå¿ƒé€‰æ‹©è·å¾—å…¨å±€æœ€ä¼˜è§£ï¼Œæ˜¯å±•ç¤ºè´ªå¿ƒç®—æ³•é«˜æ•ˆæ€§çš„å…¸å‹æ¡ˆä¾‹ã€‚

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| é¡¹ç›®                | è¯´æ˜                                                                 |
|---------------------|----------------------------------------------------------------------|
| **é—®é¢˜ç±»å‹**        | èµ„æºåˆ†é…ä¼˜åŒ–é—®é¢˜                                                     |
| **æ ¸å¿ƒæ€æƒ³**        | æŒ‰å•ä½é‡é‡ä»·å€¼æ’åºï¼Œä¼˜å…ˆé€‰æ‹©å•ä½ä»·å€¼æœ€é«˜çš„ç‰©å“                       |
| **ç®—æ³•æ­¥éª¤**        | 1. è®¡ç®—å•ä½ä»·å€¼<br>2. æŒ‰å•ä½ä»·å€¼é™åºæ’åº<br>3. ä¾æ¬¡é€‰å–ç‰©å“ç›´è‡³èƒŒåŒ…æ»¡ |
| **æ—¶é—´å¤æ‚åº¦**      | O(n log n)ï¼Œä¸»è¦æ¥è‡ªæ’åºæ­¥éª¤                                         |
| **ç©ºé—´å¤æ‚åº¦**      | O(n)                                                                 |
| **æœ€ä¼˜æ€§**          | å¯è·å¾—å…¨å±€æœ€ä¼˜è§£ï¼ˆè¯æ˜è§é—®é¢˜åˆ†æï¼‰                                   |
| **ä¸0-1èƒŒåŒ…åŒºåˆ«**   | å…è®¸å–ç‰©å“éƒ¨åˆ†ï¼Œè´ªå¿ƒç®—æ³•é€‚ç”¨ï¼›0-1èƒŒåŒ…éœ€åŠ¨æ€è§„åˆ’                      |

## ğŸ¯ é—®é¢˜åˆ†æ

### é—®é¢˜å®šä¹‰
åˆ†æ•°èƒŒåŒ…é—®é¢˜å¯æè¿°ä¸ºï¼šç»™å®šä¸€ç»„ç‰©å“ï¼Œæ¯ä¸ªç‰©å“æœ‰é‡é‡\(w_i\)å’Œä»·å€¼\(v_i\)ï¼Œä»¥åŠä¸€ä¸ªå®¹é‡ä¸º\(C\)çš„èƒŒåŒ…ã€‚å¦‚ä½•é€‰æ‹©ç‰©å“æ”¾å…¥èƒŒåŒ…ï¼Œä½¿å¾—æ€»ä»·å€¼æœ€å¤§ï¼Ÿä¸0-1èƒŒåŒ…ä¸åŒçš„æ˜¯ï¼Œåˆ†æ•°èƒŒåŒ…å…è®¸å–ç‰©å“çš„ä»»æ„éƒ¨åˆ†ï¼ˆå³å¯ä»¥å–0åˆ°1ä¹‹é—´çš„ä»»æ„æ¯”ä¾‹ï¼‰ã€‚

### åŸºæœ¬æ¦‚å¿µ
- **å•ä½ä»·å€¼**ï¼šç‰©å“ä»·å€¼ä¸é‡é‡çš„æ¯”å€¼\(v_i/w_i\)ï¼Œå†³å®šç‰©å“ä¼˜å…ˆçº§
- **å¯è¡Œè§£**ï¼šä¸è¶…è¿‡èƒŒåŒ…å®¹é‡çš„ç‰©å“é€‰æ‹©æ–¹æ¡ˆ
- **æœ€ä¼˜è§£**ï¼šåœ¨æ‰€æœ‰å¯è¡Œè§£ä¸­æ€»ä»·å€¼æœ€å¤§çš„æ–¹æ¡ˆ
- **è´ªå¿ƒé€‰æ‹©**ï¼šæ¯æ¬¡é€‰æ‹©å½“å‰æœ€ä¼˜çš„å±€éƒ¨è§£ï¼Œæœ€ç»ˆå¾—åˆ°å…¨å±€æœ€ä¼˜

### é—®é¢˜ç¤ºä¾‹
å‡è®¾æœ‰3ä¸ªç‰©å“å’Œå®¹é‡ä¸º50çš„èƒŒåŒ…ï¼š
- ç‰©å“Aï¼šé‡é‡30ï¼Œä»·å€¼120 â†’ å•ä½ä»·å€¼4
- ç‰©å“Bï¼šé‡é‡20ï¼Œä»·å€¼100 â†’ å•ä½ä»·å€¼5
- ç‰©å“Cï¼šé‡é‡10ï¼Œä»·å€¼60 â†’ å•ä½ä»·å€¼6

æœ€ä¼˜ç­–ç•¥ï¼šå…ˆå–ç‰©å“Cï¼ˆ10kgï¼Œ60å…ƒï¼‰ï¼Œå†å–ç‰©å“Bï¼ˆ20kgï¼Œ100å…ƒï¼‰ï¼Œæœ€åå–ç‰©å“Açš„20/30=2/3ï¼ˆ20kgï¼Œ80å…ƒï¼‰ï¼Œæ€»ä»·å€¼60+100+80=240å…ƒã€‚

### è´ªå¿ƒç­–ç•¥è¯æ˜
ä½¿ç”¨åè¯æ³•è¯æ˜åˆ†æ•°èƒŒåŒ…çš„è´ªå¿ƒç­–ç•¥èƒ½è·å¾—æœ€ä¼˜è§£ï¼š

å‡è®¾å­˜åœ¨æœ€ä¼˜è§£\(S\)ï¼Œå…¶ä¸­æœªæŒ‰å•ä½ä»·å€¼æ’åºé€‰å–ç‰©å“ã€‚è®¾ç‰©å“\(i\)æ˜¯å•ä½ä»·å€¼æœ€é«˜çš„ç‰©å“ï¼Œè€Œåœ¨\(S\)ä¸­æœªè¢«å…¨éƒ¨é€‰å–ï¼ŒåŒæ—¶å­˜åœ¨å•ä½ä»·å€¼è¾ƒä½çš„ç‰©å“\(j\)è¢«éƒ¨åˆ†æˆ–å…¨éƒ¨é€‰å–ã€‚

æ„é€ æ–°è§£\(S'\)ï¼šç”¨ç‰©å“\(i\)çš„ä¸€éƒ¨åˆ†æ›¿æ¢ç‰©å“\(j\)çš„ç›¸åº”é‡é‡ã€‚ç”±äº\(v_i/w_i > v_j/w_j\)ï¼Œæ–°è§£\(S'\)çš„æ€»ä»·å€¼é«˜äº\(S\)ï¼Œä¸\(S\)æ˜¯æœ€ä¼˜è§£çŸ›ç›¾ã€‚å› æ­¤ï¼Œæœ€ä¼˜è§£å¿…é¡»ä¼˜å…ˆé€‰æ‹©å•ä½ä»·å€¼æœ€é«˜çš„ç‰©å“ï¼Œè´ªå¿ƒç­–ç•¥æˆç«‹ã€‚

## ğŸ’» ä»£ç å®ç°

### 1. åŸºç¡€è´ªå¿ƒç®—æ³•å®ç°
```python
def fractional_knapsack(items, capacity):
    """
    åˆ†æ•°èƒŒåŒ…é—®é¢˜çš„è´ªå¿ƒç®—æ³•å®ç°
    items: ç‰©å“åˆ—è¡¨ï¼Œæ¯ä¸ªå…ƒç´ ä¸º (é‡é‡, ä»·å€¼)
    capacity: èƒŒåŒ…å®¹é‡
    è¿”å›: (æœ€å¤§æ€»ä»·å€¼, é€‰å–æ–¹æ¡ˆ)
    """
    # è®¡ç®—å•ä½ä»·å€¼å¹¶æ’åºï¼ˆé™åºï¼‰
    items_with_ratio = [(weight, value, value/weight) for weight, value in items]
    items_with_ratio.sort(key=lambda x: x[2], reverse=True)
    
    total_value = 0
    selected = []
    remaining_capacity = capacity
    
    for weight, value, ratio in items_with_ratio:
        if remaining_capacity <= 0:
            break
        
        # å–æ•´ç‰©å“æˆ–éƒ¨åˆ†ç‰©å“
        if weight <= remaining_capacity:
            # å–æ•´ç‰©å“
            total_value += value
            selected.append((weight, value, 1.0))  # 1.0è¡¨ç¤ºå…¨éƒ¨é€‰å–
            remaining_capacity -= weight
        else:
            # å–éƒ¨åˆ†ç‰©å“
            fraction = remaining_capacity / weight
            total_value += value * fraction
            selected.append((weight, value, fraction))
            remaining_capacity = 0
    
    return total_value, selected

# ç¤ºä¾‹ä½¿ç”¨
if __name__ == "__main__":
    items = [(30, 120), (20, 100), (10, 60)]  # (é‡é‡, ä»·å€¼)
    capacity = 50
    
    max_value, selected = fractional_knapsack(items, capacity)
    
    print(f"èƒŒåŒ…å®¹é‡: {capacity}")
    print(f"æœ€å¤§æ€»ä»·å€¼: {max_value:.2f}")
    print("é€‰å–æ–¹æ¡ˆ:")
    for weight, value, fraction in selected:
        print(f"- é‡é‡: {weight}, ä»·å€¼: {value}, é€‰å–æ¯”ä¾‹: {fraction:.2f}, è´¡çŒ®ä»·å€¼: {value*fraction:.2f}")
```

### 2. ä¼˜åŒ–å®ç°ï¼ˆä½¿ç”¨ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼‰
```python
import heapq

def knapsack_priority_queue(items, capacity):
    """
    ä½¿ç”¨ä¼˜å…ˆé˜Ÿåˆ—å®ç°çš„åˆ†æ•°èƒŒåŒ…ç®—æ³•
    é€‚ç”¨äºåŠ¨æ€æ·»åŠ ç‰©å“çš„åœºæ™¯
    """
    # ä½¿ç”¨æœ€å¤§å †ï¼ˆé€šè¿‡æ’å…¥è´Ÿå€¼å®ç°ï¼‰
    max_heap = [(-(value/weight), weight, value) for weight, value in items]
    heapq.heapify(max_heap)
    
    total_value = 0
    selected = []
    remaining_capacity = capacity
    
    while max_heap and remaining_capacity > 0:
        neg_ratio, weight, value = heapq.heappop(max_heap)
        ratio = -neg_ratio
        
        if weight <= remaining_capacity:
            total_value += value
            selected.append((weight, value, 1.0))
            remaining_capacity -= weight
        else:
            fraction = remaining_capacity / weight
            total_value += value * fraction
            selected.append((weight, value, fraction))
            remaining_capacity = 0
    
    return total_value, selected

# ç¤ºä¾‹ä½¿ç”¨
if __name__ == "__main__":
    items = [(30, 120), (20, 100), (10, 60)]
    capacity = 50
    
    max_value, selected = knapsack_priority_queue(items, capacity)
    print(f"æœ€å¤§æ€»ä»·å€¼: {max_value:.2f}")
```

### 3. ä¸0-1èƒŒåŒ…é—®é¢˜çš„å¯¹æ¯”å®ç°
```python
def zero_one_knapsack_dp(items, capacity):
    """
    0-1èƒŒåŒ…é—®é¢˜çš„åŠ¨æ€è§„åˆ’å®ç°
    ç”¨äºå¯¹æ¯”åˆ†æ•°èƒŒåŒ…
    """
    n = len(items)
    dp = [0] * (capacity + 1)
    
    for weight, value in items:
        for j in range(capacity, weight - 1, -1):
            dp[j] = max(dp[j], dp[j - weight] + value)
    
    return dp[capacity]

# å¯¹æ¯”æµ‹è¯•
if __name__ == "__main__":
    items = [(30, 120), (20, 100), (10, 60)]
    capacity = 50
    
    # åˆ†æ•°èƒŒåŒ…ç»“æœ
    frac_value, _ = fractional_knapsack(items, capacity)
    
    # 0-1èƒŒåŒ…ç»“æœ
    zero_one_value = zero_one_knapsack_dp(items, capacity)
    
    print(f"åˆ†æ•°èƒŒåŒ…æœ€å¤§ä»·å€¼: {frac_value:.2f}")
    print(f"0-1èƒŒåŒ…æœ€å¤§ä»·å€¼: {zero_one_value}")
```

## ğŸ“Š è´ªå¿ƒç­–ç•¥åˆ†æ

### åˆ†æ•°èƒŒåŒ…çš„è´ªå¿ƒé€‰æ‹©
åˆ†æ•°èƒŒåŒ…çš„è´ªå¿ƒç­–ç•¥åŸºäºä»¥ä¸‹æ ¸å¿ƒæ€æƒ³ï¼š**åœ¨æ¯ä¸€æ­¥é€‰æ‹©å•ä½é‡é‡ä»·å€¼æœ€é«˜çš„ç‰©å“**ï¼Œè¿™ä¸€å±€éƒ¨æœ€ä¼˜é€‰æ‹©æœ€ç»ˆå¯¼è‡´å…¨å±€æœ€ä¼˜è§£ã€‚å…·ä½“å®ç°æ­¥éª¤ï¼š
1. è®¡ç®—æ‰€æœ‰ç‰©å“çš„å•ä½ä»·å€¼\(v_i/w_i\)
2. æŒ‰å•ä½ä»·å€¼é™åºæ’åºç‰©å“
3. ä¾æ¬¡é€‰å–ç‰©å“ï¼Œç›´è‡³èƒŒåŒ…æ»¡ï¼š
   - è‹¥ç‰©å“é‡é‡å°äºç­‰äºå‰©ä½™å®¹é‡ï¼Œå–å®Œæ•´ç‰©å“
   - å¦åˆ™ï¼Œå–ç‰©å“çš„ä¸€éƒ¨åˆ†å¡«å……å‰©ä½™å®¹é‡

### ç®—æ³•å¯¹æ¯”

| ç®—æ³•           | é—®é¢˜ç±»å‹          | è´ªå¿ƒç­–ç•¥                  | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | æœ€ä¼˜æ€§     |
|----------------|-------------------|---------------------------|------------|------------|------------|
| åˆ†æ•°èƒŒåŒ…è´ªå¿ƒ   | å…è®¸éƒ¨åˆ†é€‰å–      | é€‰æ‹©å•ä½ä»·å€¼æœ€é«˜ç‰©å“      | O(n log n) | O(n)       | å…¨å±€æœ€ä¼˜   |
| 0-1èƒŒåŒ…DP      | ç‰©å“ä¸å¯åˆ†å‰²      | åŠ¨æ€è§„åˆ’ï¼ŒçŠ¶æ€è½¬ç§»        | O(nC)      | O(C)       | å…¨å±€æœ€ä¼˜   |
| è´ªå¿ƒæ³•è§£å†³0-1èƒŒåŒ…| ç‰©å“ä¸å¯åˆ†å‰²      | é€‰æ‹©å•ä½ä»·å€¼æœ€é«˜ç‰©å“      | O(n log n) | O(n)       | å±€éƒ¨æœ€ä¼˜   |
| åˆ†æ”¯é™ç•Œæ³•     | ç‰©å“ä¸å¯åˆ†å‰²      | ä¼˜å…ˆçº§é˜Ÿåˆ—+å‰ªæ           | O(2â¿)      | O(n)       | å…¨å±€æœ€ä¼˜   |

### å¤æ‚åº¦åˆ†æ
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(n log n)ï¼Œä¸»è¦ç”±æ’åºæ­¥éª¤å†³å®š
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼Œç”¨äºå­˜å‚¨ç‰©å“ä¿¡æ¯å’Œæ’åº
- **ç¨³å®šæ€§**ï¼šç¨³å®šï¼Œå½“å•ä½ä»·å€¼ç›¸åŒæ—¶ï¼Œé€‰å–é¡ºåºä¸å½±å“æ€»ä»·å€¼

### æ‰©å±•æƒ…å†µåˆ†æ
1. **ç‰©å“æ•°é‡æå¤§**ï¼šå¯ä½¿ç”¨å¿«é€Ÿé€‰æ‹©ç®—æ³•æ‰¾åˆ°ç¬¬kå¤§å…ƒç´ ï¼Œå¤æ‚åº¦é™è‡³O(n)
2. **å®¹é‡æå¤§**ï¼šéœ€è€ƒè™‘æ•°å€¼ç²¾åº¦é—®é¢˜ï¼Œä½¿ç”¨æµ®ç‚¹æ•°æ—¶å¯èƒ½æœ‰è¯¯å·®ç´¯ç§¯
3. **å¤šç»´çº¦æŸ**ï¼šå¢åŠ é‡é‡ä»¥å¤–çš„çº¦æŸæ¡ä»¶ï¼ˆå¦‚ä½“ç§¯ï¼‰ï¼Œè´ªå¿ƒç­–ç•¥é€šå¸¸ä¸å†é€‚ç”¨

## ğŸ” åº”ç”¨åœºæ™¯

### èµ„æºåˆ†é…
- **é¢„ç®—åˆ†é…**ï¼šä¼ä¸šåœ¨å¤šä¸ªé¡¹ç›®é—´åˆ†é…ç ”å‘é¢„ç®—ï¼Œæœ€å¤§åŒ–æŠ•èµ„å›æŠ¥
- **æŠ•èµ„ç»„åˆ**ï¼šæŠ•èµ„è€…åœ¨ä¸åŒèµ„äº§é—´åˆ†é…èµ„é‡‘ï¼Œä¼˜åŒ–é£é™©æ”¶ç›Šæ¯”
- **äº‘è®¡ç®—èµ„æº**ï¼šäº‘æœåŠ¡æä¾›å•†åˆ†é…è®¡ç®—èµ„æºï¼Œæœ€å¤§åŒ–èµ„æºåˆ©ç”¨ç‡

### ç”Ÿäº§ä¸åˆ¶é€ 
- **åŸææ–™åˆ‡å‰²**ï¼šé‡‘å±ã€æœ¨æç­‰åŸææ–™çš„åˆ‡å‰²ä¼˜åŒ–ï¼Œå‡å°‘æµªè´¹
- **é…æ–™ä¼˜åŒ–**ï¼šé£Ÿå“ã€åŒ–å·¥ç”Ÿäº§ä¸­çš„åŸæ–™é…æ¯”ï¼Œæ§åˆ¶æˆæœ¬åŒæ—¶ä¿è¯è´¨é‡
- **ç”Ÿäº§æ’ç¨‹**ï¼šåœ¨æœ‰é™è®¾å¤‡æ—¶é—´å†…å®‰æ’ç”Ÿäº§ä»»åŠ¡ï¼Œæœ€å¤§åŒ–äº§å€¼

### ç‰©æµä¸è¿è¾“
- **è£…è½½é—®é¢˜**ï¼šè´§è½¦ã€è½®èˆ¹çš„è´§ç‰©è£…è½½ï¼Œæœ€å¤§åŒ–è¿è¾“ä»·å€¼
- **è·¯çº¿è§„åˆ’**ï¼šåœ¨æœ‰é™ç‡ƒæ–™ä¸‹é€‰æ‹©ä»·å€¼æœ€é«˜çš„è¿è¾“è·¯çº¿
- **ä»“å‚¨ç®¡ç†**ï¼šä»“åº“å­˜å‚¨ç©ºé—´åˆ†é…ï¼Œä¼˜å…ˆå­˜å‚¨é«˜å‘¨è½¬ç‡å•†å“

### å…¶ä»–é¢†åŸŸ
- **æ—¶é—´ç®¡ç†**ï¼šåœ¨æœ‰é™æ—¶é—´å†…é€‰æ‹©ä»·å€¼æœ€é«˜çš„ä»»åŠ¡ç»„åˆ
- **æ°´èµ„æºåˆ†é…**ï¼šå¹²æ—±åœ°åŒºçš„å†œä¸šç”¨æ°´åˆ†é…ï¼Œæœ€å¤§åŒ–ä½œç‰©äº§é‡
- **é¢‘è°±åˆ†é…**ï¼šé€šä¿¡é¢†åŸŸçš„æ— çº¿é¢‘è°±èµ„æºåˆ†é…

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **è¾¹ç•Œæƒ…å†µå¤„ç†**ï¼š
   - **é›¶å®¹é‡èƒŒåŒ…**ï¼šç›´æ¥è¿”å›0ä»·å€¼
   - **é›¶ä»·å€¼ç‰©å“**ï¼šä¸åº”è¢«é€‰å–
   - **è¶…å¤§ä»·å€¼/é‡é‡ç‰©å“**ï¼šæ³¨æ„æ•°å€¼æº¢å‡ºé—®é¢˜ï¼Œå¯ä½¿ç”¨æ¯”ä¾‹ç¼©æ”¾
   - **ç©ºç‰©å“åˆ—è¡¨**ï¼šè¿”å›0ä»·å€¼

2. **å®ç°æŒ‘æˆ˜**ï¼š
   - **æµ®ç‚¹æ•°ç²¾åº¦**ï¼šæ¯”ä¾‹è®¡ç®—å’Œç´¯åŠ å¯èƒ½å¯¼è‡´ç²¾åº¦è¯¯å·®ï¼Œå¯ä½¿ç”¨åˆ†æ•°è¡¨ç¤º
   - **æ’åºç¨³å®šæ€§**ï¼šå½“å•ä½ä»·å€¼ç›¸åŒæ—¶ï¼Œå¯æŒ‰é‡é‡æˆ–ä»·å€¼äºŒæ¬¡æ’åº
   - **å¤§æ•°æ®å¤„ç†**ï¼šå¯¹ç™¾ä¸‡çº§ç‰©å“éœ€ä¼˜åŒ–å†…å­˜ä½¿ç”¨

3. **ç®—æ³•é€‚ç”¨æ¡ä»¶**ï¼š
   - **ç‰©å“å¯åˆ†å‰²**ï¼šè¿™æ˜¯è´ªå¿ƒç­–ç•¥æˆç«‹çš„å‰æ
   - **ç›®æ ‡å‡½æ•°çº¿æ€§**ï¼šæ€»ä»·å€¼ä¸é€‰å–é‡æˆçº¿æ€§å…³ç³»
   - **çº¦æŸæ¡ä»¶çº¿æ€§**ï¼šæ€»é‡é‡ä¸è¶…è¿‡å®¹é‡

4. **ä¸0-1èƒŒåŒ…çš„æ··æ·†**ï¼š
   - åˆ†æ•°èƒŒåŒ…å’Œ0-1èƒŒåŒ…æ˜¯ä¸åŒé—®é¢˜ï¼Œè§£æ³•ä¸å¯äº’æ¢
   - è´ªå¿ƒç®—æ³•å¯¹0-1èƒŒåŒ…é€šå¸¸åªèƒ½å¾—åˆ°è¿‘ä¼¼è§£

## ğŸ“ æœ€ä½³å®è·µ

### å®ç°ä¼˜åŒ–æŠ€å·§
1. **é«˜æ•ˆæ’åºå®ç°**ï¼š
   ```python
   # ä½¿ç”¨keyå‡½æ•°ç›´æ¥æ’åºï¼Œé¿å…ä¸­é—´å˜é‡
   def optimized_fractional_knapsack(items, capacity):
       items.sort(key=lambda x: x[1]/x[0] if x[0] != 0 else 0, reverse=True)
       total_value = 0
       remaining = capacity
       for w, v in items:
           if remaining <= 0: break
           if w <= remaining:
               total_value += v
               remaining -= w
           else:
               total_value += v * remaining / w
               remaining = 0
       return total_value
   ```

2. **å¤„ç†ç‰¹æ®Šç‰©å“**ï¼š
   ```python
   def knapsack_with_special_cases(items, capacity):
       total_value = 0
       remaining = capacity
       
       # å…ˆå¤„ç†é›¶é‡é‡ç‰©å“
       for w, v in items:
           if w == 0 and v > 0:
               total_value += v  # é›¶é‡é‡æœ‰ä»·å€¼ç‰©å“å…¨éƒ¨é€‰å–
       
       # å¤„ç†æ™®é€šç‰©å“
       normal_items = [(w, v) for w, v in items if w > 0 and v > 0]
       normal_items.sort(key=lambda x: x[1]/x[0], reverse=True)
       
       # [å‰©ä½™å®ç°ä¸æ ‡å‡†ç®—æ³•ç›¸åŒ]
       return total_value
   ```

3. **ç²¾åº¦æ§åˆ¶**ï¼š
   ```python
   def knapsack_with_precision(items, capacity, decimals=2):
       # ä½¿ç”¨Decimalæé«˜ç²¾åº¦
       from decimal import Decimal, getcontext
       getcontext().prec = decimals + 2
       
       items.sort(key=lambda x: Decimal(x[1])/Decimal(x[0]), reverse=True)
       total_value = Decimal(0)
       remaining = Decimal(capacity)
       
       for w, v in items:
           w_dec = Decimal(w)
           v_dec = Decimal(v)
           if remaining <= 0: break
           if w_dec <= remaining:
               total_value += v_dec
               remaining -= w_dec
           else:
               total_value += v_dec * remaining / w_dec
               remaining = 0
       
       return round(total_value, decimals)
   ```

### å¸¸è§é—®é¢˜è§£å†³æ–¹æ¡ˆ
1. **å¤šçº¦æŸæ¡ä»¶**ï¼š
   ```python
   def multi_constraint_knapsack(items, constraints):
       # å¤šçº¦æŸæ¡ä»¶ä¸‹çš„è¿‘ä¼¼è§£æ³•
       # ä½¿ç”¨çº¿æ€§åŠ æƒå°†å¤šç›®æ ‡è½¬åŒ–ä¸ºå•ç›®æ ‡
       weights = [1.0, 0.5]  # å„çº¦æŸçš„æƒé‡
       
       # è®¡ç®—ç»¼åˆè¯„åˆ†
       def score(item):
           return sum(v / w for v, w in zip(item[1:], constraints)) * sum(weights)
       
       items.sort(key=score, reverse=True)
       # [å‰©ä½™å®ç°ç•¥]
   ```

2. **åŠ¨æ€ç‰©å“æ·»åŠ **ï¼š
   ```python
   import heapq
   
   class DynamicKnapsack:
       def __init__(self, capacity):
           self.capacity = capacity
           self.heap = []  # æœ€å¤§å †ï¼ˆå­˜å‚¨è´Ÿå€¼ï¼‰
           
       def add_item(self, weight, value):
           if weight > 0 and value > 0:
               heapq.heappush(self.heap, (-(value/weight), weight, value))
       
       def calculate_max_value(self):
           # [å®ç°ä¸ä¼˜å…ˆé˜Ÿåˆ—ç‰ˆæœ¬ç›¸åŒ]
           pass
   ```

3. **å¤§è§„æ¨¡æ•°æ®å¤„ç†**ï¼š
   ```python
   def large_scale_knapsack(item_generator, capacity):
       # å¤„ç†æ— æ³•ä¸€æ¬¡æ€§åŠ è½½åˆ°å†…å­˜çš„ç‰©å“
       import heapq
       heap = []
       
       for item in item_generator:
           weight, value = item
           if weight > 0 and value > 0:
               heapq.heappush(heap, (-(value/weight), weight, value))
       
       # [å‰©ä½™å®ç°ç•¥]
   ```

---

> **ç›¸å…³èµ„æº**ï¼š
> - [Wikipedia: Knapsack problem](https://en.wikipedia.org/wiki/Knapsack_problem)
> - Martello, S., & Toth, P. (1990). Knapsack Problems: Algorithms and Computer Implementations. John Wiley & Sons.
> - Cormen, T. H., Leiserson, C. E., Rivest, R. L., & Stein, C. (2009). Introduction to Algorithms (3rd ed.). MIT Press.