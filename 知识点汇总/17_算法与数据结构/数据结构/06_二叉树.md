# äºŒå‰æ ‘

äºŒå‰æ ‘æ˜¯æ ‘çŠ¶æ•°æ®ç»“æ„çš„ä¸€ç§ç‰¹æ®Šå½¢å¼ï¼Œæ¯ä¸ªèŠ‚ç‚¹æœ€å¤šåŒ…å«ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼Œé€šå¸¸ç§°ä¸ºå·¦å­èŠ‚ç‚¹å’Œå³å­èŠ‚ç‚¹ã€‚å®ƒæ˜¯è®¡ç®—æœºç§‘å­¦ä¸­åº”ç”¨æœ€å¹¿æ³›çš„æ ‘ç»“æ„ä¹‹ä¸€ï¼Œä¸ºè®¸å¤šé«˜çº§æ•°æ®ç»“æ„å’Œç®—æ³•æä¾›åŸºç¡€æ”¯æŒã€‚

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| é¡¹ç›® | è¯´æ˜ |
|------|------|
| æ•°æ®ç»“æ„ç±»å‹ | éçº¿æ€§å±‚æ¬¡ç»“æ„ |
| å­˜å‚¨ç»“æ„ | é“¾å¼å­˜å‚¨ï¼ˆä¸ºä¸»ï¼‰ã€é¡ºåºå­˜å‚¨ï¼ˆå®Œå…¨äºŒå‰æ ‘ï¼‰ |
| æ ¸å¿ƒæ“ä½œ | åˆ›å»ºã€æ’å…¥ã€åˆ é™¤ã€éå†ã€æŸ¥æ‰¾ã€é«˜åº¦è®¡ç®— |
| æ—¶é—´å¤æ‚åº¦ | æ’å…¥/åˆ é™¤/æŸ¥æ‰¾ï¼šO(n)ï¼ˆæ™®é€šäºŒå‰æ ‘ï¼‰ã€O(log n)ï¼ˆå¹³è¡¡äºŒå‰æ ‘ï¼‰ |
| ç©ºé—´å¤æ‚åº¦ | O(n) |
| ç‰¹ç‚¹ | æ¯ä¸ªèŠ‚ç‚¹æœ€å¤šæœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹ï¼›å­æ ‘æœ‰å·¦å³ä¹‹åˆ†ï¼Œæ¬¡åºä¸èƒ½é¢ å€’ |

## ğŸ¯ æ ¸å¿ƒç‰¹æ€§

1. **å±‚çº§ç»“æ„**ï¼šå…·æœ‰å”¯ä¸€æ ¹èŠ‚ç‚¹ï¼ŒèŠ‚ç‚¹é—´å­˜åœ¨æ˜ç¡®çš„çˆ¶å­å…³ç³»
2. **åº¦çš„é™åˆ¶**ï¼šæ¯ä¸ªèŠ‚ç‚¹çš„åº¦æœ€å¤§ä¸º2ï¼ˆ0ã€1æˆ–2ä¸ªå­èŠ‚ç‚¹ï¼‰
3. **æœ‰åºæ€§**ï¼šå·¦å³å­æ ‘æœ‰æ˜ç¡®åŒºåˆ†ï¼Œäº¤æ¢åæˆä¸ºä¸åŒäºŒå‰æ ‘
4. **é€’å½’ç‰¹æ€§**ï¼šä»»ä½•å­æ ‘ä»æ˜¯äºŒå‰æ ‘
5. **ç‰¹æ®Šå½¢æ€**ï¼š
   - æ»¡äºŒå‰æ ‘ï¼šæ‰€æœ‰å¶å­èŠ‚ç‚¹éƒ½åœ¨åŒä¸€å±‚ï¼Œä¸”æ¯ä¸ªéå¶å­èŠ‚ç‚¹éƒ½æœ‰ä¸¤ä¸ªå­èŠ‚ç‚¹
   - å®Œå…¨äºŒå‰æ ‘ï¼šé™¤æœ€åä¸€å±‚å¤–ï¼Œå…¶ä½™å±‚å‡æ»¡ï¼Œæœ€åä¸€å±‚èŠ‚ç‚¹ä»å·¦åˆ°å³å¡«å……
   - å¹³è¡¡äºŒå‰æ ‘ï¼šä»»æ„èŠ‚ç‚¹çš„å·¦å³å­æ ‘é«˜åº¦å·®ä¸è¶…è¿‡1

## ğŸ’» ä»£ç å®ç°

### 1. äºŒå‰æ ‘èŠ‚ç‚¹å®šä¹‰
```java
public class TreeNode {
    int val;
    TreeNode left;  // å·¦å­èŠ‚ç‚¹
    TreeNode right; // å³å­èŠ‚ç‚¹
    TreeNode parent; // çˆ¶èŠ‚ç‚¹ï¼ˆæŸäº›å®ç°ä¸­éœ€è¦ï¼‰

    // æ„é€ æ–¹æ³•
    TreeNode() {}
    TreeNode(int val) { this.val = val; }
    TreeNode(int val, TreeNode left, TreeNode right) {
        this.val = val;
        this.left = left;
        this.right = right;
    }
}
```

### 2. äºŒå‰æ ‘çš„éå†ç®—æ³•

#### 2.1 æ·±åº¦ä¼˜å…ˆéå†ï¼ˆDFSï¼‰
```java
import java.util.ArrayList;
import java.util.List;

public class BinaryTreeTraversal {
    // å‰åºéå†ï¼ˆæ ¹-å·¦-å³ï¼‰
    public List<Integer> preorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        preorderHelper(root, result);
        return result;
    }

    private void preorderHelper(TreeNode node, List<Integer> result) {
        if (node == null) return;
        result.add(node.val);          // è®¿é—®æ ¹èŠ‚ç‚¹
        preorderHelper(node.left, result);  // é€’å½’å·¦å­æ ‘
        preorderHelper(node.right, result); // é€’å½’å³å­æ ‘
    }

    // ä¸­åºéå†ï¼ˆå·¦-æ ¹-å³ï¼‰
    public List<Integer> inorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        inorderHelper(root, result);
        return result;
    }

    private void inorderHelper(TreeNode node, List<Integer> result) {
        if (node == null) return;
        inorderHelper(node.left, result);   // é€’å½’å·¦å­æ ‘
        result.add(node.val);           // è®¿é—®æ ¹èŠ‚ç‚¹
        inorderHelper(node.right, result);  // é€’å½’å³å­æ ‘
    }

    // ååºéå†ï¼ˆå·¦-å³-æ ¹ï¼‰
    public List<Integer> postorderTraversal(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        postorderHelper(root, result);
        return result;
    }

    private void postorderHelper(TreeNode node, List<Integer> result) {
        if (node == null) return;
        postorderHelper(node.left, result);  // é€’å½’å·¦å­æ ‘
        postorderHelper(node.right, result); // é€’å½’å³å­æ ‘
        result.add(node.val);           // è®¿é—®æ ¹èŠ‚ç‚¹
    }
}
```

#### 2.2 å¹¿åº¦ä¼˜å…ˆéå†ï¼ˆBFS/å±‚åºéå†ï¼‰
```java
import java.util.*;

public class LevelOrderTraversal {
    public List<List<Integer>> levelOrder(TreeNode root) {
        List<List<Integer>> result = new ArrayList<>();
        if (root == null) return result;

        Queue<TreeNode> queue = new LinkedList<>();
        queue.offer(root);

        while (!queue.isEmpty()) {
            int levelSize = queue.size();
            List<Integer> currentLevel = new ArrayList<>();

            for (int i = 0; i < levelSize; i++) {
                TreeNode node = queue.poll();
                currentLevel.add(node.val);

                // å°†å­èŠ‚ç‚¹åŠ å…¥é˜Ÿåˆ—
                if (node.left != null) queue.offer(node.left);
                if (node.right != null) queue.offer(node.right);
            }
            result.add(currentLevel);
        }
        return result;
    }
}
```

#### 2.3 è¿­ä»£å¼éå†å®ç°
```java
import java.util.*;

public class IterativeTraversal {
    // å‰åºéå†è¿­ä»£å®ç°
    public List<Integer> preorderIterative(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        if (root == null) return result;

        Stack<TreeNode> stack = new Stack<>();
        stack.push(root);

        while (!stack.isEmpty()) {
            TreeNode node = stack.pop();
            result.add(node.val);

            // æ³¨æ„å…ˆå‹å³å­èŠ‚ç‚¹ï¼Œå†å‹å·¦å­èŠ‚ç‚¹
            if (node.right != null) stack.push(node.right);
            if (node.left != null) stack.push(node.left);
        }
        return result;
    }

    // ä¸­åºéå†è¿­ä»£å®ç°
    public List<Integer> inorderIterative(TreeNode root) {
        List<Integer> result = new ArrayList<>();
        if (root == null) return result;

        Stack<TreeNode> stack = new Stack<>();
        TreeNode current = root;

        while (current != null || !stack.isEmpty()) {
            // å°†æ‰€æœ‰å·¦å­èŠ‚ç‚¹å…¥æ ˆ
            while (current != null) {
                stack.push(current);
                current = current.left;
            }

            current = stack.pop();
            result.add(current.val);
            current = current.right;
        }
        return result;
    }
}
```

### 3. äºŒå‰æ ‘å¸¸ç”¨æ“ä½œ
```java
public class BinaryTreeOperations {
    // è®¡ç®—äºŒå‰æ ‘é«˜åº¦
    public int treeHeight(TreeNode root) {
        if (root == null) return 0;
        return Math.max(treeHeight(root.left), treeHeight(root.right)) + 1;
    }

    // è®¡ç®—èŠ‚ç‚¹æ€»æ•°
    public int nodeCount(TreeNode root) {
        if (root == null) return 0;
        return nodeCount(root.left) + nodeCount(root.right) + 1;
    }

    // è®¡ç®—å¶å­èŠ‚ç‚¹æ•°
    public int leafCount(TreeNode root) {
        if (root == null) return 0;
        if (root.left == null && root.right == null) return 1;
        return leafCount(root.left) + leafCount(root.right);
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºå®Œå…¨äºŒå‰æ ‘
    public boolean isCompleteBinaryTree(TreeNode root) {
        if (root == null) return true;

        Queue<TreeNode> queue = new LinkedList<>();
        queue.offer(root);
        boolean encounteredNull = false;

        while (!queue.isEmpty()) {
            TreeNode node = queue.poll();

            if (node == null) {
                encounteredNull = true;
            } else {
                if (encounteredNull) return false; // éç©ºèŠ‚ç‚¹åå‡ºç°ç©ºèŠ‚ç‚¹
                queue.offer(node.left);
                queue.offer(node.right);
            }
        }
        return true;
    }
}
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ“ä½œ | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | å¤‡æ³¨ |
|------|------------|------------|------|
| å‰åºéå† | O(n) | O(h) | hä¸ºæ ‘çš„é«˜åº¦ï¼Œæœ€åæƒ…å†µO(n) |
| ä¸­åºéå† | O(n) | O(h) | é€’å½’å®ç°ä¾èµ–æ ˆç©ºé—´ |
| ååºéå† | O(n) | O(h) | è¿­ä»£å®ç°ä½¿ç”¨æ˜¾å¼æ ˆ |
| å±‚åºéå† | O(n) | O(w) | wä¸ºæ ‘çš„æœ€å¤§å®½åº¦ |
| æ±‚æ ‘é«˜ | O(n) | O(h) | é€’å½’å®ç° |
| èŠ‚ç‚¹è®¡æ•° | O(n) | O(h) | é€’å½’å®ç° |
| åˆ¤æ–­å®Œå…¨äºŒå‰æ ‘ | O(n) | O(w) | ä½¿ç”¨é˜Ÿåˆ— |

> æ³¨ï¼šnä¸ºèŠ‚ç‚¹æ€»æ•°ï¼Œhä¸ºæ ‘çš„é«˜åº¦ï¼Œwä¸ºæ ‘çš„æœ€å¤§å®½åº¦ã€‚å¯¹äºå¹³è¡¡äºŒå‰æ ‘ï¼Œh=log nï¼›å¯¹äºæ–œæ ‘ï¼Œh=nã€‚

## ğŸ” åº”ç”¨åœºæ™¯

1. **è¡¨è¾¾å¼è§£æ**ï¼šç¼–è¯‘å™¨ä½¿ç”¨æŠ½è±¡è¯­æ³•æ ‘(AST)è§£ææ•°å­¦è¡¨è¾¾å¼ï¼ŒäºŒå‰æ ‘å¯è¡¨ç¤ºè¿ç®—ç¬¦ä¼˜å…ˆçº§
2. **æ’åºç®—æ³•**ï¼šäºŒå‰æœç´¢æ ‘æ˜¯è®¸å¤šæ’åºç®—æ³•çš„åŸºç¡€
3. **æ•°æ®åº“ç´¢å¼•**ï¼šBæ ‘ã€B+æ ‘ç­‰ç´¢å¼•ç»“æ„åŸºäºäºŒå‰æ ‘æ¼”åŒ–è€Œæ¥
4. **å†³ç­–è¿‡ç¨‹**ï¼šç”¨äºè¡¨ç¤ºå†³ç­–æ ‘ï¼Œå¦‚æœºå™¨å­¦ä¹ ä¸­çš„åˆ†ç±»ç®—æ³•
5. **æ–‡ä»¶ç³»ç»Ÿ**ï¼šæŸäº›æ–‡ä»¶ç³»ç»Ÿé‡‡ç”¨äºŒå‰æ ‘ç»“æ„ç»„ç»‡æ–‡ä»¶
6. **å“ˆå¤«æ›¼ç¼–ç **ï¼šæ•°æ®å‹ç¼©ç®—æ³•ä¸­ä½¿ç”¨äºŒå‰æ ‘æ„å»ºæœ€ä¼˜å‰ç¼€ç 
7. **æ¸¸æˆå¼€å‘**ï¼šç”¨äºAIå†³ç­–å’Œè·¯å¾„è§„åˆ’

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **ç©ºæŒ‡é’ˆå¤„ç†**ï¼šæ“ä½œäºŒå‰æ ‘æ—¶å¿…é¡»æ³¨æ„ç©ºæŒ‡é’ˆåˆ¤æ–­ï¼Œé¿å…NullPointerException
2. **é€’å½’æ·±åº¦**ï¼šé€’å½’å®ç°å¯èƒ½å¯¼è‡´æ ˆæº¢å‡ºï¼Œæ·±åº¦è¾ƒå¤§æ—¶å»ºè®®ä½¿ç”¨è¿­ä»£æ–¹å¼
3. **æ ‘çš„å¹³è¡¡æ€§**ï¼šæ™®é€šäºŒå‰æ ‘å¯èƒ½é€€åŒ–ä¸ºé“¾è¡¨ï¼Œå½±å“æ€§èƒ½
4. **éå†é¡ºåºé€‰æ‹©**ï¼š
   - å‰åºéå†ï¼šé€‚åˆå¤åˆ¶æ ‘ç»“æ„
   - ä¸­åºéå†ï¼šé€‚åˆäºŒå‰æœç´¢æ ‘çš„æ’åºè¾“å‡º
   - ååºéå†ï¼šé€‚åˆåˆ é™¤æ ‘æˆ–è®¡ç®—è¡¨è¾¾å¼
   - å±‚åºéå†ï¼šé€‚åˆæŒ‰å±‚æ¬¡å¤„ç†èŠ‚ç‚¹
5. **å†…å­˜ç®¡ç†**ï¼šé¢‘ç¹åˆ›å»ºå’Œåˆ é™¤èŠ‚ç‚¹å¯èƒ½å¯¼è‡´å†…å­˜ç¢ç‰‡
6. **çº¿ç¨‹å®‰å…¨**ï¼šäºŒå‰æ ‘æ“ä½œé»˜è®¤éçº¿ç¨‹å®‰å…¨ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒéœ€åŠ é”

## ğŸ“ æœ€ä½³å®è·µ

1. **é€‰æ‹©åˆé€‚çš„éå†æ–¹å¼**ï¼š
   - é€’å½’å®ç°ç®€æ´ä½†å¯èƒ½æœ‰æ ˆæº¢å‡ºé£é™©
   - è¿­ä»£å®ç°æ›´å¤æ‚ä½†é€‚åˆå¤§æ•°æ®é‡
   - Morriséå†å¯å®ç°O(1)ç©ºé—´å¤æ‚åº¦

2. **å¹³è¡¡æ ‘çš„åº”ç”¨**ï¼šå¯¹äºé¢‘ç¹æ’å…¥åˆ é™¤æ“ä½œï¼Œè€ƒè™‘ä½¿ç”¨AVLæ ‘æˆ–çº¢é»‘æ ‘ç­‰å¹³è¡¡ç»“æ„

3. **é¿å…é‡å¤è®¡ç®—**ï¼šå¤æ‚æ“ä½œä¸­å¯ä½¿ç”¨ç¼“å­˜å­˜å‚¨ä¸­é—´ç»“æœï¼ˆå¦‚è®°å¿†åŒ–æœç´¢ï¼‰

4. **æ³›å‹è®¾è®¡**ï¼šå®ç°æ—¶è€ƒè™‘ä½¿ç”¨æ³›å‹ï¼Œä½¿äºŒå‰æ ‘æ”¯æŒå¤šç§æ•°æ®ç±»å‹

5. **å¯è§†åŒ–è°ƒè¯•**ï¼šå¤æ‚æ ‘ç»“æ„å¯é€šè¿‡å¯è§†åŒ–å·¥å…·è¾…åŠ©è°ƒè¯•

6. **æµ‹è¯•ç”¨ä¾‹è®¾è®¡**ï¼šéœ€è¦†ç›–å¤šç§æƒ…å†µï¼š
   - ç©ºæ ‘
   - åªæœ‰æ ¹èŠ‚ç‚¹
   - å®Œå…¨äºŒå‰æ ‘
   - æ–œæ ‘ï¼ˆå·¦æ–œæˆ–å³æ–œï¼‰
   - æ»¡äºŒå‰æ ‘

### ä»£ç ç¤ºä¾‹ï¼šMorrisä¸­åºéå†ï¼ˆO(1)ç©ºé—´å¤æ‚åº¦ï¼‰
```java
public List<Integer> morrisInorder(TreeNode root) {
    List<Integer> result = new ArrayList<>();
    TreeNode current = root;
    TreeNode predecessor = null;

    while (current != null) {
        if (current.left == null) {
            result.add(current.val);
            current = current.right;
        } else {
            // æ‰¾åˆ°å‰é©±èŠ‚ç‚¹
            predecessor = current.left;
            while (predecessor.right != null && predecessor.right != current) {
                predecessor = predecessor.right;
            }

            if (predecessor.right == null) {
                predecessor.right = current;
                current = current.left;
            } else {
                predecessor.right = null;
                result.add(current.val);
                current = current.right;
            }
        }
    }
    return result;
}
```

---

> **å®ŒæˆçŠ¶æ€**ï¼šæœ¬æ–‡æ¡£å·²å®Œå–„äºŒå‰æ ‘çš„åŸºæœ¬æ¦‚å¿µã€å®ç°ä»£ç ã€éå†ç®—æ³•ã€å¤æ‚åº¦åˆ†æã€åº”ç”¨åœºæ™¯åŠæœ€ä½³å®è·µï¼ŒåŒ…å«Javaå®ç°çš„å¤šç§éå†æ–¹å¼å’Œå¸¸ç”¨æ“ä½œï¼Œå¯ä½œä¸ºäºŒå‰æ ‘æ•°æ®ç»“æ„çš„å®Œæ•´å­¦ä¹ å‚è€ƒã€‚