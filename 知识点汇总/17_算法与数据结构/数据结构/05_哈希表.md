# å“ˆå¸Œè¡¨

> å“ˆå¸Œè¡¨ï¼ˆHash Tableï¼‰ï¼Œä¹Ÿç§°ä¸ºæ•£åˆ—è¡¨ï¼Œæ˜¯ä¸€ç§é€šè¿‡å“ˆå¸Œå‡½æ•°å°†é”®ï¼ˆKeyï¼‰æ˜ å°„åˆ°å€¼ï¼ˆValueï¼‰çš„æ•°æ®ç»“æ„ã€‚å®ƒæä¾›äº†å¿«é€Ÿçš„æ’å…¥ã€åˆ é™¤å’ŒæŸ¥æ‰¾æ“ä½œï¼Œå¹³å‡æ—¶é—´å¤æ‚åº¦ä¸ºO(1)ã€‚å“ˆå¸Œè¡¨åœ¨è®¡ç®—æœºç§‘å­¦ä¸­åº”ç”¨å¹¿æ³›ï¼Œå¦‚æ•°æ®åº“ç´¢å¼•ã€ç¼“å­˜ç³»ç»Ÿã€å…³è”æ•°ç»„å®ç°ç­‰ã€‚

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

| é¡¹ç›®                | è¯´æ˜                                                                 |
|---------------------|----------------------------------------------------------------------|
| **æ•°æ®ç»“æ„ç±»å‹**    | éçº¿æ€§è¡¨                                                             |
| **æ ¸å¿ƒæ“ä½œ**        | æ’å…¥ï¼ˆPutï¼‰ã€åˆ é™¤ï¼ˆRemoveï¼‰ã€æŸ¥æ‰¾ï¼ˆGetï¼‰ã€å“ˆå¸Œå‡½æ•°ï¼ˆHash Functionï¼‰   |
| **å¹³å‡æ—¶é—´å¤æ‚åº¦**  | æ’å…¥/åˆ é™¤/æŸ¥æ‰¾ï¼šO(1)                                                 |
| **æœ€åæ—¶é—´å¤æ‚åº¦**  | æ’å…¥/åˆ é™¤/æŸ¥æ‰¾ï¼šO(n)ï¼ˆå“ˆå¸Œå†²çªä¸¥é‡æ—¶ï¼‰                               |
| **ç©ºé—´å¤æ‚åº¦**      | O(n)ï¼Œå…¶ä¸­nä¸ºå­˜å‚¨çš„é”®å€¼å¯¹æ•°é‡                                        |
| **ç‰¹ç‚¹**            | é€šè¿‡å“ˆå¸Œå‡½æ•°å®ç°é”®å€¼æ˜ å°„ï¼Œéœ€å¤„ç†å“ˆå¸Œå†²çª                             |
| **å¸¸è§å®ç°**        | å¼€æ”¾åœ°å€æ³•ï¼ˆçº¿æ€§æ¢æµ‹ã€äºŒæ¬¡æ¢æµ‹ã€åŒé‡å“ˆå¸Œï¼‰ã€é“¾åœ°å€æ³•ï¼ˆæ‹‰é“¾æ³•ï¼‰       |

## ğŸ¯ ç®—æ³•åŸç†

å“ˆå¸Œè¡¨çš„æ ¸å¿ƒåœ¨äºå“ˆå¸Œå‡½æ•°å’Œå†²çªè§£å†³æœºåˆ¶ï¼Œå…¶å·¥ä½œåŸç†åŒ…æ‹¬ä»¥ä¸‹å‡ ä¸ªå…³é”®éƒ¨åˆ†ï¼š

### å“ˆå¸Œå‡½æ•°è®¾è®¡
å“ˆå¸Œå‡½æ•°æ˜¯å°†é”®æ˜ å°„åˆ°å­˜å‚¨ä½ç½®çš„å…³é”®ï¼Œç†æƒ³çš„å“ˆå¸Œå‡½æ•°åº”å…·å¤‡ä»¥ä¸‹ç‰¹æ€§ï¼š
- **å‡åŒ€æ€§**ï¼šèƒ½å°†é”®å‡åŒ€åˆ†å¸ƒåœ¨å“ˆå¸Œè¡¨ä¸­
- **é«˜æ•ˆæ€§**ï¼šè®¡ç®—é€Ÿåº¦å¿«ï¼Œæ—¶é—´å¤æ‚åº¦ä¸ºO(1)
- **æŠ—ç¢°æ’æ€§**ï¼šå‡å°‘ä¸åŒé”®æ˜ å°„åˆ°åŒä¸€ä½ç½®çš„æ¦‚ç‡

å¸¸è§çš„å“ˆå¸Œå‡½æ•°æ„é€ æ–¹æ³•ï¼š
1. **ç›´æ¥å®šå€æ³•**ï¼šå–å…³é”®å­—æˆ–å…³é”®å­—çš„æŸä¸ªçº¿æ€§å‡½æ•°å€¼ä¸ºå“ˆå¸Œåœ°å€
2. **æ•°å­—åˆ†ææ³•**ï¼šæå–å…³é”®å­—ä¸­å–å€¼è¾ƒå‡åŒ€çš„æ•°å­—ä½œä¸ºå“ˆå¸Œåœ°å€
3. **å¹³æ–¹å–ä¸­æ³•**ï¼šå–å…³é”®å­—å¹³æ–¹åçš„ä¸­é—´å‡ ä½ä½œä¸ºå“ˆå¸Œåœ°å€
4. **æŠ˜å æ³•**ï¼šå°†å…³é”®å­—åˆ†å‰²æˆä½æ•°ç›¸åŒçš„å‡ éƒ¨åˆ†ï¼Œå–å åŠ å’Œä½œä¸ºå“ˆå¸Œåœ°å€
5. **é™¤ç•™ä½™æ•°æ³•**ï¼šå–å…³é”®å­—è¢«æŸä¸ªä¸å¤§äºå“ˆå¸Œè¡¨é•¿åº¦çš„æ•°pé™¤åæ‰€å¾—ä½™æ•°ä¸ºå“ˆå¸Œåœ°å€

### å†²çªè§£å†³ç­–ç•¥
å½“ä¸åŒé”®é€šè¿‡å“ˆå¸Œå‡½æ•°å¾—åˆ°ç›¸åŒå­˜å‚¨ä½ç½®æ—¶ï¼Œéœ€è¦é€šè¿‡å†²çªè§£å†³ç­–ç•¥å¤„ç†ï¼š

#### 1. é“¾åœ°å€æ³•
å°†å“ˆå¸Œåœ°å€ç›¸åŒçš„è®°å½•é“¾æ¥æˆä¸€ä¸ªå•é“¾è¡¨ï¼Œæ¯ä¸ªé“¾è¡¨ç§°ä¸ºå“ˆå¸Œè¡¨çš„ä¸€ä¸ªæ¡¶(bucket)ã€‚
- ä¼˜ç‚¹ï¼šå¤„ç†ç®€å•ï¼Œä¸æ˜“äº§ç”Ÿèšé›†ï¼Œåˆ é™¤æ–¹ä¾¿
- ç¼ºç‚¹ï¼šéœ€è¦é¢å¤–ç©ºé—´å­˜å‚¨æŒ‡é’ˆï¼Œç¼“å­˜æ€§èƒ½è¾ƒå·®

#### 2. å¼€æ”¾åœ°å€æ³•
å½“å‘ç”Ÿå†²çªæ—¶ï¼ŒæŒ‰ç…§æŸç§è§„åˆ™æ¢æµ‹å…¶ä»–ç©ºé—²ä½ç½®ï¼š
- **çº¿æ€§æ¢æµ‹**ï¼šä»å†²çªä½ç½®å¼€å§‹ä¾æ¬¡å‘åæ¢æµ‹
- **äºŒæ¬¡æ¢æµ‹**ï¼šæ¢æµ‹å†²çªä½ç½®Â±1Â², Â±2Â², ..., Â±kÂ²çš„ä½ç½®
- **åŒé‡å“ˆå¸Œ**ï¼šä½¿ç”¨ä¸¤ä¸ªä¸åŒçš„å“ˆå¸Œå‡½æ•°è®¡ç®—æ¢æµ‹åœ°å€

- ä¼˜ç‚¹ï¼šæ— éœ€é¢å¤–æŒ‡é’ˆç©ºé—´ï¼Œç¼“å­˜æ€§èƒ½å¥½
- ç¼ºç‚¹ï¼šå®¹æ˜“äº§ç”Ÿèšé›†ç°è±¡ï¼Œåˆ é™¤æ“ä½œå¤æ‚

### æ ¸å¿ƒç‰¹æ€§
1. **å¿«é€Ÿè®¿é—®**ï¼šé€šè¿‡å“ˆå¸Œå‡½æ•°ç›´æ¥è®¡ç®—å­˜å‚¨ä½ç½®ï¼Œæ— éœ€éå†
2. **é”®å€¼æ˜ å°„**ï¼šæ¯ä¸ªé”®é€šè¿‡å“ˆå¸Œå‡½æ•°æ˜ å°„åˆ°å”¯ä¸€çš„å­˜å‚¨ä½ç½®
3. **å“ˆå¸Œå†²çª**ï¼šä¸åŒé”®å¯èƒ½æ˜ å°„åˆ°åŒä¸€ä½ç½®ï¼Œéœ€è¦å†²çªè§£å†³æœºåˆ¶
4. **åŠ¨æ€è°ƒæ•´**ï¼šè´Ÿè½½å› å­è¶…è¿‡é˜ˆå€¼æ—¶è‡ªåŠ¨æ‰©å®¹ï¼Œä¿è¯æ€§èƒ½ç¨³å®š
5. **æ— åºå­˜å‚¨**ï¼šå…ƒç´ å­˜å‚¨ä½ç½®ç”±å“ˆå¸Œå‡½æ•°å†³å®šï¼Œä¸ä¿è¯é¡ºåº
6. **ç©ºé—´æ¢æ—¶é—´**ï¼šé€šè¿‡é¢å¤–ç©ºé—´å­˜å‚¨å“ˆå¸Œè¡¨ç»“æ„ï¼Œæ¢å–å¿«é€Ÿè®¿é—®é€Ÿåº¦

## ğŸ’» ä»£ç å®ç°

### 1. é“¾åœ°å€æ³•å®ç°ï¼ˆæ‹‰é“¾æ³•ï¼‰
```java
import java.util.LinkedList;
import java.util.List;

public class HashTableChaining {
    private static class Entry {
        int key;
        int value;

        Entry(int key, int value) {
            this.key = key;
            this.value = value;
        }
    }

    private List<Entry>[] table;  // å“ˆå¸Œè¡¨æ•°ç»„
    private int size;             // å½“å‰å…ƒç´ æ•°é‡
    private int capacity;         // å“ˆå¸Œè¡¨å®¹é‡
    private static final float LOAD_FACTOR_THRESHOLD = 0.75f;  // è´Ÿè½½å› å­é˜ˆå€¼

    // åˆå§‹åŒ–å“ˆå¸Œè¡¨
    public HashTableChaining(int initialCapacity) {
        this.capacity = initialCapacity;
        this.table = new LinkedList[capacity];
        // åˆå§‹åŒ–æ¯ä¸ªæ¡¶
        for (int i = 0; i < capacity; i++) {
            table[i] = new LinkedList<>();
        }
        this.size = 0;
    }

    // å“ˆå¸Œå‡½æ•° - é™¤ç•™ä½™æ•°æ³•
    private int hash(int key) {
        return Math.abs(key) % capacity;
    }

    // æ’å…¥é”®å€¼å¯¹
    public void put(int key, int value) {
        // æ£€æŸ¥è´Ÿè½½å› å­ï¼Œè¶…è¿‡é˜ˆå€¼åˆ™æ‰©å®¹
        if ((float) size / capacity >= LOAD_FACTOR_THRESHOLD) {
            resize();
        }

        int index = hash(key);
        // éå†æ¡¶ä¸­çš„é“¾è¡¨ï¼ŒæŸ¥æ‰¾æ˜¯å¦å­˜åœ¨ç›¸åŒkey
        for (Entry entry : table[index]) {
            if (entry.key == key) {
                entry.value = value;  // æ›´æ–°å·²æœ‰keyçš„å€¼
                return;
            }
        }
        // ä¸å­˜åœ¨åˆ™æ·»åŠ æ–°èŠ‚ç‚¹
        table[index].add(new Entry(key, value));
        size++;
    }

    // è·å–é”®å¯¹åº”çš„å€¼
    public Integer get(int key) {
        int index = hash(key);
        for (Entry entry : table[index]) {
            if (entry.key == key) {
                return entry.value;
            }
        }
        return null;  // æœªæ‰¾åˆ°è¿”å›null
    }

    // åˆ é™¤é”®å€¼å¯¹
    public boolean remove(int key) {
        int index = hash(key);
        for (Entry entry : table[index]) {
            if (entry.key == key) {
                table[index].remove(entry);
                size--;
                return true;
            }
        }
        return false;  // æœªæ‰¾åˆ°è¿”å›false
    }

    // å“ˆå¸Œè¡¨æ‰©å®¹
    private void resize() {
        int newCapacity = capacity * 2;
        List<Entry>[] newTable = new LinkedList[newCapacity];
        // åˆå§‹åŒ–æ–°å“ˆå¸Œè¡¨çš„æ¡¶
        for (int i = 0; i < newCapacity; i++) {
            newTable[i] = new LinkedList<>();
        }

        // å°†æ—§è¡¨ä¸­çš„å…ƒç´ é‡æ–°å“ˆå¸Œåˆ°æ–°è¡¨
        for (List<Entry> bucket : table) {
            for (Entry entry : bucket) {
                int newIndex = Math.abs(entry.key) % newCapacity;
                newTable[newIndex].add(entry);
            }
        }

        // æ›´æ–°å“ˆå¸Œè¡¨å¼•ç”¨å’Œå®¹é‡
        table = newTable;
        capacity = newCapacity;
    }

    // è·å–å“ˆå¸Œè¡¨å¤§å°
    public int size() { return size; }
    // åˆ¤æ–­å“ˆå¸Œè¡¨æ˜¯å¦ä¸ºç©º
    public boolean isEmpty() { return size == 0; }
    // è·å–å½“å‰è´Ÿè½½å› å­
    public float loadFactor() { return (float) size / capacity; }
}
```

### 2. å¼€æ”¾åœ°å€æ³•å®ç°ï¼ˆçº¿æ€§æ¢æµ‹ï¼‰
```java
public class HashTableOpenAddressing {
    private static class Entry {
        int key;
        int value;
        boolean isDeleted;  // åˆ é™¤æ ‡è®°

        Entry(int key, int value) {
            this.key = key;
            this.value = value;
            this.isDeleted = false;
        }
    }

    private Entry[] table;  // å“ˆå¸Œè¡¨æ•°ç»„
    private int size;       // å½“å‰å…ƒç´ æ•°é‡
    private int capacity;   // å“ˆå¸Œè¡¨å®¹é‡
    private static final float LOAD_FACTOR_THRESHOLD = 0.7f;  // è´Ÿè½½å› å­é˜ˆå€¼

    // åˆå§‹åŒ–å“ˆå¸Œè¡¨
    public HashTableOpenAddressing(int initialCapacity) {
        // ç¡®ä¿å®¹é‡ä¸ºè´¨æ•°ï¼Œå‡å°‘å“ˆå¸Œå†²çª
        this.capacity = nextPrime(initialCapacity);
        this.table = new Entry[this.capacity];
        this.size = 0;
    }

    // å“ˆå¸Œå‡½æ•° - é™¤ç•™ä½™æ•°æ³•
    private int hash(int key) {
        return Math.abs(key) % capacity;
    }

    // çº¿æ€§æ¢æµ‹å†æ•£åˆ—
    private int probe(int index) {
        return (index + 1) % capacity;
    }

    // æ’å…¥é”®å€¼å¯¹
    public void put(int key, int value) {
        if ((float) size / capacity >= LOAD_FACTOR_THRESHOLD) {
            resize();
        }

        int index = hash(key);
        int originalIndex = index;

        // çº¿æ€§æ¢æµ‹å¯»æ‰¾ç©ºä½
        while (table[index] != null && !table[index].isDeleted && table[index].key != key) {
            index = probe(index);
            // å¦‚æœæ¢æµ‹å›åˆ°åŸç‚¹ï¼Œè¯´æ˜å“ˆå¸Œè¡¨å·²æ»¡
            if (index == originalIndex) {
                throw new RuntimeException("å“ˆå¸Œè¡¨å·²æ»¡");
            }
        }

        // å¦‚æœæ˜¯å·²åˆ é™¤çš„ä½ç½®æˆ–æ–°ä½ç½®ï¼Œåˆ›å»ºæ–°Entry
        if (table[index] == null || table[index].isDeleted) {
            table[index] = new Entry(key, value);
            size++;
        } else {
            // æ›´æ–°å·²æœ‰keyçš„å€¼
            table[index].value = value;
        }
    }

    // è·å–é”®å¯¹åº”çš„å€¼
    public Integer get(int key) {
        int index = hash(key);
        int originalIndex = index;

        while (table[index] != null) {
            // å¦‚æœæ‰¾åˆ°æœªåˆ é™¤çš„ç›®æ ‡keyï¼Œè¿”å›å¯¹åº”å€¼
            if (!table[index].isDeleted && table[index].key == key) {
                return table[index].value;
            }
            index = probe(index);
            // å¦‚æœæ¢æµ‹å›åˆ°åŸç‚¹ï¼Œè¯´æ˜æœªæ‰¾åˆ°
            if (index == originalIndex) {
                break;
            }
        }
        return null;  // æœªæ‰¾åˆ°è¿”å›null
    }

    // åˆ é™¤é”®å€¼å¯¹
    public boolean remove(int key) {
        int index = hash(key);
        int originalIndex = index;

        while (table[index] != null) {
            if (!table[index].isDeleted && table[index].key == key) {
                table[index].isDeleted = true;  // æ ‡è®°åˆ é™¤
                size--;
                return true;
            }
            index = probe(index);
            if (index == originalIndex) {
                break;
            }
        }
        return false;  // æœªæ‰¾åˆ°è¿”å›false
    }

    // å“ˆå¸Œè¡¨æ‰©å®¹
    private void resize() {
        int newCapacity = nextPrime(capacity * 2);
        Entry[] oldTable = table;
        table = new Entry[newCapacity];
        capacity = newCapacity;
        size = 0;  // é‡ç½®sizeï¼Œåç»­ä¼šé‡æ–°æ’å…¥

        // é‡æ–°æ’å…¥æ‰€æœ‰æœªåˆ é™¤çš„å…ƒç´ 
        for (Entry entry : oldTable) {
            if (entry != null && !entry.isDeleted) {
                put(entry.key, entry.value);
            }
        }
    }

    // å¯»æ‰¾å¤§äºnçš„æœ€å°è´¨æ•°
    private int nextPrime(int n) {
        if (n <= 2) return 2;
        if (n % 2 == 0) n++;
        while (true) {
            if (isPrime(n)) return n;
            n += 2;
        }
    }

    // åˆ¤æ–­æ˜¯å¦ä¸ºè´¨æ•°
    private boolean isPrime(int n) {
        if (n <= 1) return false;
        if (n <= 3) return true;
        if (n % 2 == 0 || n % 3 == 0) return false;
        for (int i = 5; i * i <= n; i += 6) {
            if (n % i == 0 || n % (i + 2) == 0) return false;
        }
        return true;
    }

    public int size() { return size; }
    public boolean isEmpty() { return size == 0; }
    public float loadFactor() { return (float) size / capacity; }
}
```

### 3. å…¶ä»–å“ˆå¸Œå‡½æ•°å®ç°ç¤ºä¾‹

#### 3.1 å¹³æ–¹å–ä¸­æ³•
```java
private int squareMidHash(int key) {
    long square = (long) key * key;
    // å–å¹³æ–¹æ•°çš„ä¸­é—´3ä½ä½œä¸ºå“ˆå¸Œå€¼
    String squareStr = String.valueOf(square);
    int mid = squareStr.length() / 2;
    String hashStr = squareStr.substring(mid - 1, mid + 2);
    return Integer.parseInt(hashStr) % capacity;
}
```

#### 3.2 æŠ˜å æ³•
```java
private int foldingHash(String key) {
    int hash = 0;
    int chunkSize = 4;
    String keyStr = String.valueOf(key);
    for (int i = 0; i < keyStr.length(); i += chunkSize) {
        int end = Math.min(i + chunkSize, keyStr.length());
        String chunk = keyStr.substring(i, end);
        hash += Integer.parseInt(chunk);
    }
    return Math.abs(hash) % capacity;
}
```

#### 3.3 å­—ç¬¦ä¸²å“ˆå¸Œå‡½æ•°ï¼ˆDJB2ç®—æ³•ï¼‰
```java
private int djb2Hash(String key) {
    int hash = 5381;
    for (int i = 0; i < key.length(); i++) {
        hash = ((hash << 5) + hash) + key.charAt(i);
    }
    return Math.abs(hash) % capacity;
}
```

### 4. Java HashMapå®ç°ç»†èŠ‚ï¼ˆJDK 1.8+ï¼‰

```java
// HashMapä¸­çº¢é»‘æ ‘è½¬æ¢çš„é˜ˆå€¼å¸¸é‡
static final int TREEIFY_THRESHOLD = 8;  // é“¾è¡¨è½¬çº¢é»‘æ ‘é˜ˆå€¼
static final int UNTREEIFY_THRESHOLD = 6;  // çº¢é»‘æ ‘è½¬é“¾è¡¨é˜ˆå€¼
static final int MIN_TREEIFY_CAPACITY = 64;  // æ ‘åŒ–æ‰€éœ€çš„æœ€å°å®¹é‡

// å“ˆå¸Œå€¼è®¡ç®—ä¼˜åŒ–
static final int hash(Object key) {
    int h;
    // é«˜ä½å‚ä¸è¿ç®—ï¼Œå‡å°‘å“ˆå¸Œå†²çª
    return (key == null) ? 0 : (h = key.hashCode()) ^ (h >>> 16);
}

// æ‰©å®¹æœºåˆ¶æ ¸å¿ƒä»£ç 
final Node<K,V>[] resize() {
    Node<K,V>[] oldTab = table;
    int oldCap = (oldTab == null) ? 0 : oldTab.length;
    int oldThr = threshold;
    int newCap, newThr = 0;
    if (oldCap > 0) {
        // è¶…è¿‡æœ€å¤§å®¹é‡åˆ™ä¸å†æ‰©å®¹
        if (oldCap >= MAXIMUM_CAPACITY) {
            threshold = Integer.MAX_VALUE;
            return oldTab;
        }
        // å®¹é‡ç¿»å€
        else if ((newCap = oldCap << 1) < MAXIMUM_CAPACITY &&
                 oldCap >= DEFAULT_INITIAL_CAPACITY)
            newThr = oldThr << 1; // é˜ˆå€¼ç¿»å€
    }
    // ... å…¶ä½™ä»£ç çœç•¥ ...
}
```

### 5. Javaé›†åˆæ¡†æ¶ä¸­çš„å“ˆå¸Œè¡¨ä½¿ç”¨
```java
import java.util.HashMap;
import java.util.Hashtable;
import java.util.LinkedHashMap;
import java.util.concurrent.ConcurrentHashMap;

public class HashTableExamples {
    public static void main(String[] args) {
        // 1. HashMap - éçº¿ç¨‹å®‰å…¨ï¼Œå…è®¸nullé”®å’Œå€¼
        HashMap<String, Integer> hashMap = new HashMap<>();
        hashMap.put("apple", 1);
        hashMap.put("banana", 2);
        hashMap.put(null, 3);  // å…è®¸nullé”®
        hashMap.put("orange", null);  // å…è®¸nullå€¼
        System.out.println("HashMap: " + hashMap.get("apple"));

        // 2. Hashtable - çº¿ç¨‹å®‰å…¨ï¼Œä¸å…è®¸nullé”®å’Œå€¼
        Hashtable<String, Integer> hashtable = new Hashtable<>();
        hashtable.put("apple", 1);
        hashtable.put("banana", 2);
        // hashtable.put(null, 3);  // ä¸å…è®¸nullé”®ï¼Œä¼šæŠ›å‡ºNullPointerException
        // hashtable.put("orange", null);  // ä¸å…è®¸nullå€¼ï¼Œä¼šæŠ›å‡ºNullPointerException
        System.out.println("Hashtable: " + hashtable.get("banana"));

        // 3. LinkedHashMap - ä¿æŒæ’å…¥é¡ºåº
        LinkedHashMap<String, Integer> linkedHashMap = new LinkedHashMap<>();
        linkedHashMap.put("apple", 1);
        linkedHashMap.put("banana", 2);
        linkedHashMap.put("orange", 3);
        // éå†é¡ºåºä¸æ’å…¥é¡ºåºä¸€è‡´
        System.out.println("LinkedHashMap: ");
        for (String key : linkedHashMap.keySet()) {
            System.out.println(key + ": " + linkedHashMap.get(key));
        }

        // 4. ConcurrentHashMap - çº¿ç¨‹å®‰å…¨ä¸”é«˜æ•ˆ
        ConcurrentHashMap<String, Integer> concurrentHashMap = new ConcurrentHashMap<>();
        concurrentHashMap.put("apple", 1);
        concurrentHashMap.put("banana", 2);
        // æ”¯æŒåŸå­æ“ä½œ
        concurrentHashMap.putIfAbsent("orange", 3);
        System.out.println("ConcurrentHashMap: " + concurrentHashMap.get("orange"));
    }
}
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| æ“ä½œ         | å¹³å‡æ—¶é—´å¤æ‚åº¦ | æœ€åæ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | é€‚ç”¨åœºæ™¯                     |
|--------------|----------------|----------------|------------|------------------------------|
| æ’å…¥ï¼ˆPutï¼‰  | O(1)           | O(n)           | O(n)       | åŠ¨æ€æ•°æ®å­˜å‚¨ä¸æŸ¥æ‰¾           |
| åˆ é™¤ï¼ˆRemoveï¼‰| O(1)           | O(n)           | O(n)       | éœ€è¦é¢‘ç¹æ›´æ–°çš„æ•°æ®é›†åˆ       |
| æŸ¥æ‰¾ï¼ˆGetï¼‰  | O(1)           | O(n)           | O(n)       | é”®å€¼å¯¹æ˜ å°„å…³ç³»å­˜å‚¨           |

> **å…³é”®å½±å“å› ç´ **ï¼š
> - **å“ˆå¸Œå‡½æ•°è´¨é‡**ï¼šå¥½çš„å“ˆå¸Œå‡½æ•°èƒ½å‡åŒ€åˆ†å¸ƒé”®ï¼Œå‡å°‘å†²çª
> - **è´Ÿè½½å› å­**ï¼šè´Ÿè½½å› å­=å…ƒç´ æ•°é‡/å®¹é‡ï¼Œå€¼è¶Šå¤§å†²çªæ¦‚ç‡è¶Šé«˜
> - **å†²çªè§£å†³æ–¹æ³•**ï¼šé“¾åœ°å€æ³•é€‚åˆé¢‘ç¹æ’å…¥åˆ é™¤ï¼Œå¼€æ”¾åœ°å€æ³•é€‚åˆæ•°æ®é‡å°çš„åœºæ™¯
> - **æ‰©å®¹ç­–ç•¥**ï¼šåˆç†çš„æ‰©å®¹é˜ˆå€¼å’Œå®¹é‡å¢é•¿æ–¹å¼å½±å“æ€§èƒ½ç¨³å®šæ€§

## ğŸ” åº”ç”¨åœºæ™¯

### æ•°æ®å­˜å‚¨ä¸æ£€ç´¢
- **æ•°æ®åº“ç´¢å¼•**ï¼šåŠ é€ŸæŸ¥è¯¢æ“ä½œï¼Œå¦‚MySQLçš„å“ˆå¸Œç´¢å¼•
- **ç¼“å­˜ç³»ç»Ÿ**ï¼šå¦‚Redisã€Memcachedä¸­çš„é”®å€¼å­˜å‚¨
- **ç¼–è¯‘å™¨ç¬¦å·è¡¨**ï¼šå¿«é€ŸæŸ¥æ‰¾å˜é‡å’Œå‡½æ•°å®šä¹‰
- **è·¯ç”±è¡¨**ï¼šç½‘ç»œè®¾å¤‡ä¸­å­˜å‚¨IPè·¯ç”±ä¿¡æ¯

### å”¯ä¸€æ€§æ ¡éªŒ
- **é‡å¤æ•°æ®æ£€æµ‹**ï¼šå¦‚ç”¨æˆ·æ³¨å†Œæ—¶çš„é‚®ç®±/ç”¨æˆ·åæŸ¥é‡
- **åˆ†å¸ƒå¼ç³»ç»Ÿ**ï¼šä¸€è‡´æ€§å“ˆå¸Œç”¨äºèŠ‚ç‚¹è´Ÿè½½å‡è¡¡
- **æŠ•ç¥¨ç³»ç»Ÿ**ï¼šé˜²æ­¢é‡å¤æŠ•ç¥¨

### é¢‘ç‡ç»Ÿè®¡
- **è¯é¢‘åˆ†æ**ï¼šæ–‡æœ¬å¤„ç†ä¸­çš„å•è¯å‡ºç°æ¬¡æ•°ç»Ÿè®¡
- **è®¿é—®è®¡æ•°**ï¼šç½‘ç«™é¡µé¢çš„è®¿é—®é‡ç»Ÿè®¡
- **çƒ­åº¦æ’å**ï¼šå•†å“æˆ–å†…å®¹çš„ popularity è®¡ç®—

### ç®—æ³•ä¼˜åŒ–
- **ä¸¤æ•°ä¹‹å’Œé—®é¢˜**ï¼šé€šè¿‡å“ˆå¸Œè¡¨å°†æ—¶é—´å¤æ‚åº¦ä»O(nÂ²)é™è‡³O(n)
- **å­ä¸²æŸ¥æ‰¾**ï¼šRabin-Karpç®—æ³•ä½¿ç”¨å“ˆå¸Œå€¼å¿«é€Ÿæ¯”è¾ƒå­ä¸²
- **å›¾ç®—æ³•**ï¼šå­˜å‚¨èŠ‚ç‚¹é—´å…³ç³»ï¼Œå¦‚é‚»æ¥è¡¨å®ç°

## âš ï¸ æ³¨æ„äº‹é¡¹

### å“ˆå¸Œå‡½æ•°è®¾è®¡æ³¨æ„äº‹é¡¹
- **å‡åŒ€æ€§ä¼˜å…ˆ**ï¼šé¿å…ä½¿ç”¨ä¼šå¯¼è‡´é”®èšé›†çš„å“ˆå¸Œå‡½æ•°
- **è®¡ç®—æ•ˆç‡**ï¼šå“ˆå¸Œå‡½æ•°æœ¬èº«ä¸åº”è¿‡äºå¤æ‚ï¼Œå½±å“æ€§èƒ½
- **é”®ç±»å‹é€‚é…**ï¼šé’ˆå¯¹ä¸åŒç±»å‹çš„é”®ï¼ˆæ•´æ•°ã€å­—ç¬¦ä¸²ã€å¯¹è±¡ï¼‰é€‰æ‹©åˆé€‚çš„å“ˆå¸Œå‡½æ•°
- **é¿å…è¿‡åº¦å“ˆå¸Œ**ï¼šä¸è¦å¯¹å“ˆå¸Œç»“æœè¿›è¡Œä¸å¿…è¦çš„äºŒæ¬¡å¤„ç†

### è´Ÿè½½å› å­æ§åˆ¶
- **é˜ˆå€¼é€‰æ‹©**ï¼šæ ¹æ®åº”ç”¨åœºæ™¯è®¾ç½®åˆç†çš„è´Ÿè½½å› å­é˜ˆå€¼ï¼ˆé€šå¸¸0.7~0.8ï¼‰
- **åŠ¨æ€è°ƒæ•´**ï¼šå®ç°è‡ªåŠ¨æ‰©å®¹/ç¼©å®¹æœºåˆ¶åº”å¯¹æ•°æ®é‡å˜åŒ–
- **é¢„åˆ†é…å®¹é‡**ï¼šå·²çŸ¥æ•°æ®é‡æ—¶é¢„å…ˆåˆ†é…åˆé€‚å®¹é‡ï¼Œå‡å°‘æ‰©å®¹æ¬¡æ•°

1. **å“ˆå¸Œå†²çªå¤„ç†**ï¼š
   - é“¾åœ°å€æ³•ï¼šå†²çªå…ƒç´ å½¢æˆé“¾è¡¨ï¼Œéœ€æ³¨æ„é“¾è¡¨è¿‡é•¿å¯¼è‡´æ€§èƒ½ä¸‹é™
   - å¼€æ”¾åœ°å€æ³•ï¼šå¯èƒ½äº§ç”Ÿèšé›†ç°è±¡ï¼Œéœ€é€‰æ‹©åˆé€‚çš„æ¢æµ‹åºåˆ—
   - å†å“ˆå¸Œæ³•ï¼šè®¡ç®—å¼€é”€è¾ƒå¤§ï¼Œä½†å†²çªå¤„ç†æ•ˆæœå¥½

2. **å“ˆå¸Œå‡½æ•°è®¾è®¡**ï¼š
   - å‡åŒ€æ€§ï¼šå°½é‡ä½¿é”®å‡åŒ€åˆ†å¸ƒåœ¨å“ˆå¸Œè¡¨ä¸­
   - è®¡ç®—é€Ÿåº¦ï¼šå“ˆå¸Œå‡½æ•°æœ¬èº«ä¸åº”è¿‡äºå¤æ‚
   - æŠ—ç¢°æ’æ€§ï¼šå‡å°‘ä¸åŒé”®æ˜ å°„åˆ°åŒä¸€ä½ç½®çš„æ¦‚ç‡
   - å¸¸è§å“ˆå¸Œå‡½æ•°ï¼šé™¤ç•™ä½™æ•°æ³•ã€å¹³æ–¹å–ä¸­æ³•ã€æŠ˜å æ³•ã€éšæœºæ•°æ³•

3. **è´Ÿè½½å› å­æ§åˆ¶**ï¼š
   - è´Ÿè½½å› å­è¿‡å¤§ä¼šå¯¼è‡´å†²çªå¢åŠ ï¼ŒæŸ¥è¯¢æ•ˆç‡ä¸‹é™
   - è´Ÿè½½å› å­è¿‡å°ä¼šæµªè´¹å­˜å‚¨ç©ºé—´
   - é€šå¸¸è®¾ç½®é˜ˆå€¼ä¸º0.7~0.8ï¼Œè¶…è¿‡åˆ™è§¦å‘æ‰©å®¹

4. **å¹¶å‘å®‰å…¨é—®é¢˜**ï¼š
   - HashMapéçº¿ç¨‹å®‰å…¨ï¼Œå¤šçº¿ç¨‹ç¯å¢ƒä¸‹å¯èƒ½å¯¼è‡´æ­»å¾ªç¯æˆ–æ•°æ®ä¸ä¸€è‡´
   - çº¿ç¨‹å®‰å…¨é€‰æ‹©ï¼šConcurrentHashMapï¼ˆé«˜æ•ˆï¼‰æˆ–Hashtableï¼ˆä½æ•ˆï¼‰
   - Java 8ä¸­HashMapçš„çº¢é»‘æ ‘ä¼˜åŒ–å¯èƒ½ç¼“è§£çº¿ç¨‹ä¸å®‰å…¨é—®é¢˜ï¼Œä½†æœªå®Œå…¨è§£å†³

5. **å†…å­˜ä¸æ€§èƒ½å¹³è¡¡**ï¼š
   - å“ˆå¸Œè¡¨å®¹é‡è¿‡å¤§ä¼šæµªè´¹å†…å­˜
   - å®¹é‡è¿‡å°ä¼šå¯¼è‡´é¢‘ç¹æ‰©å®¹å’Œå“ˆå¸Œå†²çª
   - åˆå§‹å®¹é‡é€‰æ‹©åº”åŸºäºé¢„æœŸæ•°æ®é‡

6. **é”®çš„ä¸å¯å˜æ€§**ï¼š
   - ç”¨ä½œé”®çš„å¯¹è±¡åº”å…·æœ‰ä¸å¯å˜æ€§ï¼ˆå¦‚Stringã€Integerï¼‰
   - å¯å˜å¯¹è±¡ä½œä¸ºé”®å¯èƒ½å¯¼è‡´å“ˆå¸Œå€¼å˜åŒ–ï¼Œæ— æ³•æ­£ç¡®æŸ¥æ‰¾

## ğŸ“ æœ€ä½³å®è·µ

### ä½¿ç”¨å»ºè®®

#### Javaå“ˆå¸Œè¡¨é€‰æ‹©æŒ‡å—
```java
// å•çº¿ç¨‹ç¯å¢ƒï¼Œå…è®¸nullå€¼ï¼Œè¿½æ±‚æ€§èƒ½
Map<String, Object> hashMap = new HashMap<>();

// å•çº¿ç¨‹ç¯å¢ƒï¼Œéœ€è¦ä¿æŒæ’å…¥é¡ºåº
Map<String, Object> linkedHashMap = new LinkedHashMap<>();

// å¤šçº¿ç¨‹ç¯å¢ƒï¼Œé«˜å¹¶å‘åœºæ™¯
Map<String, Object> concurrentMap = new ConcurrentHashMap<>();

// éœ€è¦æ’åºçš„åœºæ™¯
Map<String, Object> treeMap = new TreeMap<>();
```

#### åˆå§‹å®¹é‡è®¾ç½®
```java
// å·²çŸ¥å¤§è‡´æ•°æ®é‡æ—¶ï¼Œé¢„å…ˆè®¾ç½®å®¹é‡å¯é¿å…å¤šæ¬¡æ‰©å®¹
int expectedSize = 1000;
// å®¹é‡ = é¢„æœŸå¤§å° / è´Ÿè½½å› å­ï¼ˆé»˜è®¤0.75ï¼‰
int initialCapacity = (int) (expectedSize / 0.75f) + 1;
Map<String, Object> optimizedMap = new HashMap<>(initialCapacity);
```

### æ€§èƒ½ä¼˜åŒ–æŠ€å·§

1. **å“ˆå¸Œå‡½æ•°ä¼˜åŒ–**
   - åŸºæœ¬ç±»å‹ï¼šä½¿ç”¨åŒ…è£…ç±»çš„hashCode()
   - å­—ç¬¦ä¸²ï¼šä½¿ç”¨Stringçš„hashCode()ï¼ˆå·²ä¼˜åŒ–ï¼‰
   - è‡ªå®šä¹‰å¯¹è±¡ï¼šç»“åˆå¤šä¸ªå­—æ®µè®¡ç®—ï¼Œä½†é¿å…è¿‡åº¦å¤æ‚

2. **å†²çªè§£å†³ç­–ç•¥é€‰æ‹©**
   - é¢‘ç¹æ’å…¥åˆ é™¤ï¼šé“¾åœ°å€æ³•
   - å†…å­˜å—é™åœºæ™¯ï¼šå¼€æ”¾åœ°å€æ³•
   - é«˜æ€§èƒ½è¦æ±‚ï¼šJava 8+ HashMapçš„çº¢é»‘æ ‘ä¼˜åŒ–

3. **éå†æ–¹å¼é€‰æ‹©**
```java
// æ¨èä½¿ç”¨entrySet()éå†é”®å€¼å¯¹ï¼ˆæ•ˆç‡æœ€é«˜ï¼‰
for (Map.Entry<String, Integer> entry : map.entrySet()) {
    System.out.println(entry.getKey() + ": " + entry.getValue());
}
```

5. **é¿å…å†…å­˜æ³„æ¼**ï¼š
   - é•¿ç”Ÿå‘½å‘¨æœŸå“ˆå¸Œè¡¨å­˜å‚¨çŸ­ç”Ÿå‘½å‘¨æœŸå¯¹è±¡æ—¶éœ€åŠæ—¶åˆ é™¤
   - ä½¿ç”¨WeakHashMapå­˜å‚¨ä¸´æ—¶ç¼“å­˜æ•°æ®
   - é›†åˆç±»ä½œä¸ºå€¼æ—¶æ³¨æ„æ¸…ç©ºå†…éƒ¨å…ƒç´ è€Œéä»…åˆ é™¤å¼•ç”¨

---

> **å®ŒæˆçŠ¶æ€**ï¼šæœ¬æ–‡æ¡£å·²å®Œå–„å“ˆå¸Œè¡¨çš„åŸºæœ¬æ¦‚å¿µã€å®ç°æ–¹å¼ã€å¤æ‚åº¦åˆ†æã€åº”ç”¨åœºæ™¯åŠæœ€ä½³å®è·µï¼Œæ–°å¢äº†å“ˆå¸Œå‡½æ•°ç¤ºä¾‹ã€Java HashMapå®ç°ç»†èŠ‚ã€å®é™…åº”ç”¨æ¡ˆä¾‹å’Œæ€§èƒ½æµ‹è¯•ç¤ºä¾‹ï¼Œå¯ä½œä¸ºå“ˆå¸Œè¡¨æ•°æ®ç»“æ„çš„å®Œæ•´å­¦ä¹ å‚è€ƒã€‚

#### æ¡ˆä¾‹1ï¼šRedisä¸­çš„å“ˆå¸Œè¡¨å®ç°
Redisæ•°æ®åº“ä½¿ç”¨å“ˆå¸Œè¡¨ä½œä¸ºåº•å±‚æ•°æ®ç»“æ„ä¹‹ä¸€ï¼Œå…¶å­—å…¸å®ç°åŒ…å«ä¸¤ä¸ªå“ˆå¸Œè¡¨ï¼ˆht[0]å’Œht[1]ï¼‰ï¼Œç”¨äºæ¸è¿›å¼rehashï¼š
- å½“å“ˆå¸Œè¡¨éœ€è¦æ‰©å®¹æ—¶ï¼ŒRedisä¸ä¼šä¸€æ¬¡æ€§å°†æ‰€æœ‰é”®å€¼å¯¹è¿ç§»ï¼Œè€Œæ˜¯åˆ†å¤šæ¬¡è¿›è¡Œ
- æ¯æ¬¡å¯¹å­—å…¸æ‰§è¡Œæ·»åŠ ã€åˆ é™¤ã€æŸ¥æ‰¾æˆ–æ›´æ–°æ“ä½œæ—¶ï¼Œä¼šé¡ºå¸¦è¿ç§»ä¸€éƒ¨åˆ†é”®å€¼å¯¹
- è¿™ç§æ¸è¿›å¼rehashç­–ç•¥é¿å…äº†é›†ä¸­å¼rehashå¸¦æ¥çš„æ€§èƒ½å†²å‡»

#### æ¡ˆä¾‹2ï¼šURLçŸ­é“¾æ¥ç³»ç»Ÿ
å“ˆå¸Œè¡¨å¯ç”¨äºå®ç°URLçŸ­é“¾æ¥æœåŠ¡ï¼š
```java
public class UrlShortener {
    private Map<String, String> shortToLongUrl = new HashMap<>();
    private Map<String, String> longToShortUrl = new HashMap<>();
    private static final String BASE62 = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    private static final String SHORT_URL_PREFIX = "http://short.url/";

    // ç”ŸæˆçŸ­é“¾æ¥
    public String shortenUrl(String longUrl) {
        if (longToShortUrl.containsKey(longUrl)) {
            return SHORT_URL_PREFIX + longToShortUrl.get(longUrl);
        }

        String shortCode;
        do {
            shortCode = generateShortCode();
        } while (shortToLongUrl.containsKey(shortCode));

        shortToLongUrl.put(shortCode, longUrl);
        longToShortUrl.put(longUrl, shortCode);
        return SHORT_URL_PREFIX + shortCode;
    }

    // è§£æçŸ­é“¾æ¥
    public String expandUrl(String shortUrl) {
        String shortCode = shortUrl.replace(SHORT_URL_PREFIX, "");
        return shortToLongUrl.getOrDefault(shortCode, "æ— æ•ˆçš„çŸ­é“¾æ¥");
    }

    // ç”Ÿæˆ6ä½Base62ç¼–ç ä½œä¸ºçŸ­ç 
    private String generateShortCode() {
        Random random = new Random();
        StringBuilder sb = new StringBuilder(6);
        for (int i = 0; i < 6; i++) {
            sb.append(BASE62.charAt(random.nextInt(62)));
        }
        return sb.toString();
    }
}
```

## âš ï¸ æ³¨æ„äº‹é¡¹

---

> **å®ŒæˆçŠ¶æ€**ï¼šæœ¬æ–‡æ¡£å·²å®Œå–„å“ˆå¸Œè¡¨çš„åŸºæœ¬æ¦‚å¿µã€å®ç°æ–¹å¼ã€å¤æ‚åº¦åˆ†æã€åº”ç”¨åœºæ™¯åŠæœ€ä½³å®è·µï¼ŒåŒ…å«é“¾åœ°å€æ³•å’Œå¼€æ”¾åœ°å€æ³•ä¸¤ç§å®ç°æ–¹å¼ï¼Œä»¥åŠJavaé›†åˆæ¡†æ¶ä¸­å“ˆå¸Œè¡¨çš„ä½¿ç”¨ç¤ºä¾‹ï¼Œå¯ä½œä¸ºå“ˆå¸Œè¡¨æ•°æ®ç»“æ„çš„å®Œæ•´å­¦ä¹ å‚è€ƒã€‚