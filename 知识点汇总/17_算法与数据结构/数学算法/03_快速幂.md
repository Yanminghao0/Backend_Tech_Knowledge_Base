# å¿«é€Ÿå¹‚

å¿«é€Ÿå¹‚ï¼ˆExponentiation by Squaringï¼‰æ˜¯ä¸€ç§é«˜æ•ˆè®¡ç®—å¹‚è¿ç®—çš„ç®—æ³•ï¼Œé€šè¿‡å°†æŒ‡æ•°åˆ†è§£ä¸ºäºŒè¿›åˆ¶å½¢å¼ï¼Œå°†æ—¶é—´å¤æ‚åº¦ä»O(n)é™ä½åˆ°O(log n)ï¼Œå¹¿æ³›åº”ç”¨äºå¯†ç å­¦ã€æ•°å€¼è®¡ç®—å’Œç®—æ³•ä¼˜åŒ–ç­‰é¢†åŸŸã€‚

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯
- **å®šä¹‰**ï¼šé€šè¿‡æŒ‡æ•°çš„äºŒè¿›åˆ¶åˆ†è§£ï¼Œä½¿ç”¨å¹³æ–¹å’Œä¹˜æ³•å¿«é€Ÿè®¡ç®—a^bçš„ç®—æ³•
- **åˆ«å**ï¼šå¹³æ–¹æ±‚å¹‚æ³•ã€äºŒè¿›åˆ¶ exponentiation
- **æ ¸å¿ƒæ€æƒ³**ï¼ša^(2k) = (a^k)^2ï¼Œa^(2k+1) = a^(2k) Ã— a
- **æ•°å­¦æ€§è´¨**ï¼šä»»ä½•æ­£æ•´æ•°éƒ½å¯ä»¥è¡¨ç¤ºä¸º2çš„å¹‚æ¬¡ä¹‹å’Œï¼Œå³b = 2^k1 + 2^k2 + ... + 2^kn

## ğŸ¯ ç®—æ³•åŸç†

### 1. åŸºæœ¬å¿«é€Ÿå¹‚ç®—æ³•
- **åŸºæœ¬æ€æƒ³**ï¼šå°†æŒ‡æ•°bè¡¨ç¤ºä¸ºäºŒè¿›åˆ¶ï¼Œå¯¹æ¯ä¸€ä½ä¸º1çš„ä½ç½®ç´¯ä¹˜å½“å‰åº•æ•°çš„2^iæ¬¡å¹‚
- **æ­¥éª¤**ï¼š
  1. åˆå§‹åŒ–ç»“æœresult = 1ï¼Œå½“å‰åº•æ•°base = a
  2. å°†æŒ‡æ•°bè½¬æ¢ä¸ºäºŒè¿›åˆ¶ï¼Œä»æœ€ä½ä½å¼€å§‹å¤„ç†
  3. å¦‚æœå½“å‰ä½ä¸º1ï¼Œå°†resultä¹˜ä»¥base
  4. å°†baseå¹³æ–¹ï¼ˆbase = base^2ï¼‰ï¼ŒæŒ‡æ•°å³ç§»ä¸€ä½ï¼ˆb = b >> 1ï¼‰
  5. é‡å¤æ­¥éª¤3-4ç›´åˆ°æŒ‡æ•°ä¸º0

### 2. æ¨¡å—åŒ–å¿«é€Ÿå¹‚
- **åŸºæœ¬æ€æƒ³**ï¼šåœ¨å¿«é€Ÿå¹‚è®¡ç®—è¿‡ç¨‹ä¸­åŒæ­¥è¿›è¡Œæ¨¡è¿ç®—ï¼Œé¿å…æ•°å€¼æº¢å‡º
- **æ ¸å¿ƒå…¬å¼**ï¼š(a Ã— b) mod m = [(a mod m) Ã— (b mod m)] mod m
- **åº”ç”¨åœºæ™¯**ï¼šå¯†ç å­¦ä¸­çš„RSAç®—æ³•ã€æ¨¡è¿ç®—ç›¸å…³é—®é¢˜

### 3. é€’å½’å¿«é€Ÿå¹‚
- **åŸºæœ¬æ€æƒ³**ï¼šé€šè¿‡é€’å½’å°†æŒ‡æ•°åˆ†è§£ä¸ºå¶æ•°å’Œå¥‡æ•°ä¸¤ç§æƒ…å†µå¤„ç†
- **é€’å½’å…¬å¼**ï¼š
  - è‹¥bä¸ºå¶æ•°ï¼ša^b = (a^(b/2))^2
  - è‹¥bä¸ºå¥‡æ•°ï¼ša^b = a Ã— (a^((b-1)/2))^2
  - è¾¹ç•Œæ¡ä»¶ï¼ša^0 = 1

## ğŸ’» ä»£ç å®ç°

### è¿­ä»£ç‰ˆå¿«é€Ÿå¹‚
```python
def fast_power_iterative(base, exponent):
    result = 1
    while exponent > 0:
        # å¦‚æœå½“å‰ä½ä¸º1ï¼Œåˆ™ä¹˜ä»¥å½“å‰åº•æ•°
        if exponent % 2 == 1:
            result *= base
        # åº•æ•°å¹³æ–¹ï¼ŒæŒ‡æ•°å³ç§»ä¸€ä½
        base *= base
        exponent = exponent // 2
    return result
```

### æ¨¡å—åŒ–å¿«é€Ÿå¹‚
```python
def modular_exponentiation(base, exponent, mod):
    if mod == 1:
        return 0
    result = 1
    base = base % mod
    while exponent > 0:
        if exponent % 2 == 1:
            result = (result * base) % mod
        exponent = exponent // 2
        base = (base * base) % mod
    return result
```

### é€’å½’ç‰ˆå¿«é€Ÿå¹‚
```python
def fast_power_recursive(base, exponent):
    if exponent == 0:
        return 1
    elif exponent % 2 == 0:
        half = fast_power_recursive(base, exponent // 2)
        return half * half
    else:
        half = fast_power_recursive(base, (exponent - 1) // 2)
        return base * half * half
```

### å¤„ç†è´ŸæŒ‡æ•°çš„å¿«é€Ÿå¹‚
```python
def fast_power_with_negative(base, exponent):
    if exponent < 0:
        return 1 / fast_power_iterative(base, -exponent)
    return fast_power_iterative(base, exponent)
```

## ğŸ“Š å¤æ‚åº¦åˆ†æ

| ç®—æ³• | æ—¶é—´å¤æ‚åº¦ | ç©ºé—´å¤æ‚åº¦ | ç‰¹ç‚¹ |
|------|------------|------------|------|
| è¿­ä»£ç‰ˆå¿«é€Ÿå¹‚ | O(log n) | O(1) | æ•ˆç‡é«˜ï¼Œæ— é€’å½’æ ˆå¼€é”€ |
| é€’å½’ç‰ˆå¿«é€Ÿå¹‚ | O(log n) | O(log n) | ç®€æ´ä½†æœ‰é€’å½’æ ˆå¼€é”€ |
| æ¨¡å—åŒ–å¿«é€Ÿå¹‚ | O(log n) | O(1) | é€‚åˆå¤§æ•´æ•°è¿ç®—ï¼Œé˜²æ­¢æº¢å‡º |

## ğŸ” åº”ç”¨åœºæ™¯
- **å¯†ç å­¦**ï¼šRSAåŠ å¯†ç®—æ³•ä¸­çš„å¯†é’¥ç”Ÿæˆå’ŒåŠ å¯†è§£å¯†è¿‡ç¨‹
- **æ•°å€¼è®¡ç®—**ï¼šç§‘å­¦è®¡ç®—ä¸­çš„å¤§æŒ‡æ•°è¿ç®—
- **ç®—æ³•ä¼˜åŒ–**ï¼šçŸ©é˜µå¿«é€Ÿå¹‚æ±‚è§£çº¿æ€§é€’æ¨å…³ç³»ï¼ˆå¦‚æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰
- **æ•°æ®æ ¡éªŒ**ï¼šæ¨¡è¿ç®—åœ¨å“ˆå¸Œå’Œæ ¡éªŒå’Œè®¡ç®—ä¸­çš„åº”ç”¨
- **æ¸¸æˆå¼€å‘**ï¼šæ¦‚ç‡è®¡ç®—å’Œæ•°å€¼æ¨¡æ‹Ÿä¸­çš„æŒ‡æ•°å¢é•¿æ¨¡å‹

## âš ï¸ æ³¨æ„äº‹é¡¹
- å¤„ç†è´Ÿæ•°æŒ‡æ•°æ—¶éœ€ç‰¹åˆ«å¤„ç†ï¼Œå¯èƒ½æ¶‰åŠæµ®ç‚¹æ•°è¿ç®—
- æ•´æ•°æº¢å‡ºé—®é¢˜ï¼šå¤§æŒ‡æ•°è¿ç®—å¯èƒ½è¶…å‡ºè¯­è¨€çš„æ•´æ•°è¡¨ç¤ºèŒƒå›´
- æµ®ç‚¹æ•°ç²¾åº¦ï¼šéå¸¸å¤§æˆ–éå¸¸å°çš„ç»“æœå¯èƒ½å¯¼è‡´ç²¾åº¦æŸå¤±
- åº•æ•°ä¸º0ä¸”æŒ‡æ•°ä¸º0æ—¶æ— æ„ä¹‰ï¼Œéœ€ç‰¹æ®Šå¤„ç†
- æ¨¡å—åŒ–å¿«é€Ÿå¹‚ä¸­ï¼Œæ¨¡ä¸º1æ—¶ç»“æœæ’ä¸º0

## ğŸ“ æœ€ä½³å®è·µ
- **æ€§èƒ½ä¼˜å…ˆ**ï¼šä¼˜å…ˆé€‰æ‹©è¿­ä»£å®ç°ï¼Œé¿å…é€’å½’æ ˆå¼€é”€
- **å¤§æ•´æ•°å¤„ç†**ï¼šä½¿ç”¨æ¨¡å—åŒ–å¿«é€Ÿå¹‚é˜²æ­¢æº¢å‡º
- **Pythonç¯å¢ƒ**ï¼šå¯¹äºè¶…å¤§æ•°è®¡ç®—ï¼Œåˆ©ç”¨Pythonçš„æ— é™ç²¾åº¦æ•´æ•°ç‰¹æ€§
- **æ•°å€¼ç¨³å®šæ€§**ï¼šå¤„ç†æµ®ç‚¹æ•°æ—¶è€ƒè™‘ä½¿ç”¨å¯¹æ•°è½¬æ¢æˆ–åˆ†æ²»ç­–ç•¥
- **çŸ©é˜µå¿«é€Ÿå¹‚**ï¼šç»“åˆå¿«é€Ÿå¹‚æ€æƒ³ä¼˜åŒ–çŸ©é˜µå¹‚è¿ç®—ï¼Œç”¨äºæ±‚è§£çº¿æ€§é€’æ¨

```python
# çŸ©é˜µå¿«é€Ÿå¹‚ç¤ºä¾‹ï¼ˆæ±‚è§£æ–æ³¢é‚£å¥‘æ•°åˆ—ï¼‰
def matrix_mult(a, b):
    return [
        [a[0][0]*b[0][0] + a[0][1]*b[1][0], a[0][0]*b[0][1] + a[0][1]*b[1][1]],
        [a[1][0]*b[0][0] + a[1][1]*b[1][0], a[1][0]*b[0][1] + a[1][1]*b[1][1]]
    ]

def matrix_pow(mat, power):
    result = [[1, 0], [0, 1]]  # å•ä½çŸ©é˜µ
    while power > 0:
        if power % 2 == 1:
            result = matrix_mult(result, mat)
        mat = matrix_mult(mat, mat)
        power //= 2
    return result

def fibonacci(n):
    if n <= 0:
        return 0
    mat = [[1, 1], [1, 0]]
    return matrix_pow(mat, n-1)[0][0]
```

---

> **ç›¸å…³é“¾æ¥**ï¼š
> - [å¿«é€Ÿå¹‚ç®—æ³•](https://zh.wikipedia.org/wiki/ exponentiation_by_squaring)
> - [æ¨¡è¿ç®—](https://zh.wikipedia.org/wiki/æ¨¡è¿ç®—)
> - [RSAåŠ å¯†ç®—æ³•](https://zh.wikipedia.org/wiki/RSAåŠ å¯†ç®—æ³•)