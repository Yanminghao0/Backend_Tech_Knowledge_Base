# æ’åˆ—ç»„åˆé—®é¢˜

> æ’åˆ—ç»„åˆæ˜¯å›æº¯ç®—æ³•çš„åŸºç¡€åº”ç”¨ï¼Œç”¨äºç”Ÿæˆé›†åˆä¸­å…ƒç´ çš„æ‰€æœ‰å¯èƒ½æ’åˆ—æˆ–ç»„åˆã€‚æ’åˆ—å¼ºè°ƒå…ƒç´ çš„é¡ºåºï¼Œè€Œç»„åˆä¸è€ƒè™‘é¡ºåºã€‚è¿™ä¸¤ç±»é—®é¢˜åœ¨ç»„åˆæ•°å­¦ã€ç®—æ³•è®¾è®¡å’Œå®é™…åº”ç”¨ä¸­éƒ½æœ‰å¹¿æ³›ç”¨é€”ã€‚

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯
- **ç±»åˆ«**ï¼šå›æº¯ç®—æ³•ã€ç»„åˆæ•°å­¦
- **éš¾åº¦**ï¼šä¸­ç­‰
- **æ ¸å¿ƒæ€æƒ³**ï¼šé€šè¿‡é€’å½’æ¢ç´¢æ‰€æœ‰å¯èƒ½çš„å…ƒç´ æ’åˆ—æˆ–ç»„åˆï¼Œä½¿ç”¨å‰ªæé¿å…é‡å¤è§£
- **æ—¶é—´å¤æ‚åº¦**ï¼šO(nÃ—n!)ï¼ˆæ’åˆ—ï¼‰ï¼ŒO(2â¿)ï¼ˆç»„åˆï¼‰
- **ç©ºé—´å¤æ‚åº¦**ï¼šO(n)ï¼ˆé€’å½’æ ˆå’Œè·¯å¾„å­˜å‚¨ï¼‰
- **å…³é”®è¯**ï¼šå›æº¯ã€æ’åˆ—ã€ç»„åˆã€å‰ªæã€å»é‡ã€é€’å½’

## ğŸ¯ é—®é¢˜åˆ†æ
æ’åˆ—ç»„åˆé—®é¢˜ä¸»è¦åˆ†ä¸ºä¸¤å¤§ç±»ï¼š

### æ’åˆ—é—®é¢˜
ä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºkä¸ªå…ƒç´ ï¼ŒæŒ‰ç…§ä¸€å®šé¡ºåºæ’æˆä¸€åˆ—ï¼Œç§°ä¸ºä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºkä¸ªå…ƒç´ çš„æ’åˆ—ã€‚å½“k=næ—¶ï¼Œç§°ä¸ºå…¨æ’åˆ—ã€‚
- **ç‰¹ç‚¹**ï¼šå…ƒç´ é¡ºåºé‡è¦ï¼Œ{1,2}ä¸{2,1}æ˜¯ä¸åŒæ’åˆ—
- **æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„æ’åˆ—ï¼Œå¦‚ä½•å¤„ç†é‡å¤å…ƒç´ 

### ç»„åˆé—®é¢˜
ä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºkä¸ªå…ƒç´ ç»„æˆä¸€ä¸ªé›†åˆï¼Œç§°ä¸ºä»nä¸ªä¸åŒå…ƒç´ ä¸­å–å‡ºkä¸ªå…ƒç´ çš„ç»„åˆã€‚
- **ç‰¹ç‚¹**ï¼šå…ƒç´ é¡ºåºæ— å…³ï¼Œ{1,2}ä¸{2,1}æ˜¯ç›¸åŒç»„åˆ
- **æ ¸å¿ƒé—®é¢˜**ï¼šå¦‚ä½•ç”Ÿæˆæ‰€æœ‰å¯èƒ½çš„ç»„åˆï¼Œå¦‚ä½•æ§åˆ¶ç»„åˆå¤§å°

### è§£é¢˜æ€è·¯å¯¹æ¯”
| é—®é¢˜ç±»å‹ | å…³é”®åŒºåˆ« | æ§åˆ¶æ–¹æ³• | å…¸å‹åº”ç”¨ |
|---------|---------|---------|---------|
| æ’åˆ—é—®é¢˜ | è€ƒè™‘å…ƒç´ é¡ºåº | è®°å½•ä½¿ç”¨è¿‡çš„å…ƒç´  | å¯†ç ç ´è§£ã€æ’åºç®—æ³• |
| ç»„åˆé—®é¢˜ | ä¸è€ƒè™‘å…ƒç´ é¡ºåº | æ§åˆ¶ä¸‹ä¸€ä¸ªå…ƒç´ çš„èµ·å§‹ç´¢å¼• | å­é›†ç”Ÿæˆã€ç»„åˆä¼˜åŒ– |

## ğŸ’» ä»£ç å®ç°
### Javaå®ç°ï¼ˆæ’åˆ—é—®é¢˜ï¼‰
#### 1. æ— é‡å¤å…ƒç´ çš„å…¨æ’åˆ—
```java
import java.util.*;

public class Permutations {
    public List<List<Integer>> permute(int[] nums) {
        List<List<Integer>> result = new ArrayList<>();
        if (nums == null || nums.length == 0) return result;
        // è®°å½•å…ƒç´ æ˜¯å¦è¢«ä½¿ç”¨
        boolean[] used = new boolean[nums.length];
        backtrack(result, new ArrayList<>(), nums, used);
        return result;
    }

    private void backtrack(List<List<Integer>> result, List<Integer> path, int[] nums, boolean[] used) {
        // ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºæ•°ç»„é•¿åº¦
        if (path.size() == nums.length) {
            result.add(new ArrayList<>(path));
            return;
        }

        for (int i = 0; i < nums.length; i++) {
            // è·³è¿‡å·²ä½¿ç”¨çš„å…ƒç´ 
            if (used[i]) continue;

            // åšé€‰æ‹©
            used[i] = true;
            path.add(nums[i]);

            // é€’å½’æ¢ç´¢
            backtrack(result, path, nums, used);

            // æ’¤é”€é€‰æ‹©
            path.remove(path.size() - 1);
            used[i] = false;
        }
    }

    public static void main(String[] args) {
        Permutations solution = new Permutations();
        int[] nums = {1, 2, 3};
        List<List<Integer>> result = solution.permute(nums);
        System.out.println("å…¨æ’åˆ—ç»“æœï¼ˆ" + result.size() + "ç§ï¼‰ï¼š");
        for (List<Integer> permutation : result) {
            System.out.println(permutation);
        }
    }
}
```

#### 2. æœ‰é‡å¤å…ƒç´ çš„å…¨æ’åˆ—ï¼ˆå»é‡ï¼‰
```java
import java.util.*;

public class PermutationsWithDup {
    public List<List<Integer>> permuteUnique(int[] nums) {
        List<List<Integer>> result = new ArrayList<>();
        if (nums == null || nums.length == 0) return result;
        // æ’åºï¼Œä½¿é‡å¤å…ƒç´ ç›¸é‚»
        Arrays.sort(nums);
        backtrack(result, new ArrayList<>(), nums, used);
        return result;
    }

    private void backtrack(List<List<Integer>> result, List<Integer> path, int[] nums, boolean[] used) {
        if (path.size() == nums.length) {
            result.add(new ArrayList<>(path));
            return;
        }

        for (int i = 0; i < nums.length; i++) {
            if (used[i]) continue;
            // å»é‡å‰ªæï¼šå¦‚æœå‰ä¸€ä¸ªç›¸åŒå…ƒç´ æœªè¢«ä½¿ç”¨ï¼Œåˆ™è·³è¿‡å½“å‰å…ƒç´ 
            if (i > 0 && nums[i] == nums[i-1] && !used[i-1]) continue;

            used[i] = true;
            path.add(nums[i]);
            backtrack(result, path, nums, used);
            path.remove(path.size() - 1);
            used[i] = false;
        }
    }

    public static void main(String[] args) {
        PermutationsWithDup solution = new PermutationsWithDup();
        int[] nums = {1, 1, 2};
        List<List<Integer>> result = solution.permuteUnique(nums);
        System.out.println("å»é‡å…¨æ’åˆ—ç»“æœï¼ˆ" + result.size() + "ç§ï¼‰ï¼š");
        for (List<Integer> permutation : result) {
            System.out.println(permutation);
        }
    }
}
```

### Javaå®ç°ï¼ˆç»„åˆé—®é¢˜ï¼‰
#### 1. ç»„åˆæ€»å’Œï¼ˆæ— é‡å¤å…ƒç´ ï¼‰
```java
import java.util.*;

public class Combinations {
    public List<List<Integer>> combine(int n, int k) {
        List<List<Integer>> result = new ArrayList<>();
        backtrack(result, new ArrayList<>(), n, k, 1);
        return result;
    }

    private void backtrack(List<List<Integer>> result, List<Integer> path, int n, int k, int start) {
        // ç»ˆæ­¢æ¡ä»¶ï¼šè·¯å¾„é•¿åº¦ç­‰äºk
        if (path.size() == k) {
            result.add(new ArrayList<>(path));
            return;
        }

        // å‰ªæä¼˜åŒ–ï¼šiçš„ä¸Šé™å¯ä»¥è®¡ç®—å¾—å‡ºï¼Œæ— éœ€éå†åˆ°n
        for (int i = start; i <= n - (k - path.size()) + 1; i++) {
            path.add(i);
            // é€’å½’æ¢ç´¢ï¼Œä¸‹ä¸€ä¸ªå…ƒç´ ä»i+1å¼€å§‹ï¼ˆé¿å…é‡å¤ç»„åˆï¼‰
            backtrack(result, path, n, k, i + 1);
            path.remove(path.size() - 1);
        }
    }

    public static void main(String[] args) {
        Combinations solution = new Combinations();
        List<List<Integer>> result = solution.combine(4, 2);
        System.out.println("ç»„åˆç»“æœï¼ˆ" + result.size() + "ç§ï¼‰ï¼š");
        for (List<Integer> combination : result) {
            System.out.println(combination);
        }
    }
}
```

#### 2. ç»„åˆæ€»å’ŒIIï¼ˆæœ‰é‡å¤å…ƒç´ ï¼‰
```java
import java.util.*;

public class CombinationSum2 {
    public List<List<Integer>> combinationSum2(int[] candidates, int target) {
        List<List<Integer>> result = new ArrayList<>();
        if (candidates == null || candidates.length == 0) return result;
        Arrays.sort(candidates); // æ’åºç”¨äºå»é‡
        backtrack(result, new ArrayList<>(), candidates, target, 0, 0);
        return result;
    }

    private void backtrack(List<List<Integer>> result, List<Integer> path, int[] candidates, 
                          int target, int start, int currentSum) {
        // æ‰¾åˆ°ç›®æ ‡å’Œï¼Œè®°å½•ç»“æœ
        if (currentSum == target) {
            result.add(new ArrayList<>(path));
            return;
        }

        // å½“å‰å’Œè¶…è¿‡ç›®æ ‡ï¼Œå‰ªæ
        if (currentSum > target) {
            return;
        }

        for (int i = start; i < candidates.length; i++) {
            // å»é‡å‰ªæï¼šè·³è¿‡é‡å¤å…ƒç´ 
            if (i > start && candidates[i] == candidates[i-1]) {
                continue;
            }

            path.add(candidates[i]);
            backtrack(result, path, candidates, target, i + 1, currentSum + candidates[i]);
            path.remove(path.size() - 1);
        }
    }
}
```

## ğŸ“Š å‰ªæç­–ç•¥
æ’åˆ—ç»„åˆé—®é¢˜çš„å‰ªæç­–ç•¥å¯¹äºæé«˜ç®—æ³•æ•ˆç‡è‡³å…³é‡è¦ï¼š

### 1. æ’åˆ—é—®é¢˜å‰ªæ
#### é‡å¤å…ƒç´ å‰ªæ
- **åŸç†**ï¼šå¯¹é‡å¤å…ƒç´ ï¼Œåªæœ‰å½“å‰ä¸€ä¸ªç›¸åŒå…ƒç´ è¢«ä½¿ç”¨åï¼Œæ‰å…è®¸ä½¿ç”¨å½“å‰å…ƒç´ 
- **å®ç°**ï¼š
  ```java
  if (i > 0 && nums[i] == nums[i-1] && !used[i-1]) continue;
  ```
- **æ¡ä»¶**ï¼šå¿…é¡»å…ˆå¯¹æ•°ç»„æ’åº

#### æå‰é€€å‡ºå‰ªæ
- **åŸç†**ï¼šå½“è·¯å¾„é•¿åº¦åŠ ä¸Šå‰©ä½™å…ƒç´ ä¸è¶³ä»¥è¾¾åˆ°ç›®æ ‡é•¿åº¦æ—¶ï¼Œåœæ­¢æœç´¢
- **å®ç°**ï¼š
  ```java
  if (path.size() + (nums.length - i) < requiredSize) break;
  ```

### 2. ç»„åˆé—®é¢˜å‰ªæ
#### èµ·å§‹ä½ç½®å‰ªæ
- **åŸç†**ï¼šé€šè¿‡æ§åˆ¶startå‚æ•°ï¼Œç¡®ä¿å…ƒç´ æŒ‰é¡ºåºé€‰æ‹©ï¼Œé¿å…é‡å¤ç»„åˆ
- **å®ç°**ï¼šé€’å½’è°ƒç”¨æ—¶ä½¿ç”¨i+1è€Œé0ä½œä¸ºä¸‹ä¸€æ¬¡çš„start
- **æ•ˆæœ**ï¼šå½»åº•é¿å…{1,2}å’Œ{2,1}è¿™æ ·çš„é‡å¤ç»„åˆ

#### è¾¹ç•Œå‰ªæ
- **åŸç†**ï¼šè®¡ç®—içš„ä¸Šé™ï¼Œé¿å…ä¸å¿…è¦çš„å¾ªç¯
- **å®ç°**ï¼š
  ```java
  for (int i = start; i <= n - (k - path.size()) + 1; i++)
  ```
- **æ•ˆæœ**ï¼šå°†å¾ªç¯æ¬¡æ•°ä»næ¬¡å‡å°‘åˆ°n-k+path.size()æ¬¡

#### å’Œå€¼å‰ªæ
- **åŸç†**ï¼šå½“å½“å‰å’ŒåŠ ä¸Šå½“å‰å…ƒç´ è¶…è¿‡ç›®æ ‡å€¼æ—¶ï¼Œåœæ­¢æœç´¢
- **å®ç°**ï¼š
  ```java
  if (currentSum + candidates[i] > target) break;
  ```
- **æ¡ä»¶**ï¼šæ•°ç»„å¿…é¡»å…ˆæ’åº

## ğŸ” ç»å…¸é¢˜ç›®
| é¢˜ç›® | éš¾åº¦ | è€ƒç‚¹ | é“¾æ¥ |
|------|------|------|------|
| å…¨æ’åˆ— | ä¸­ç­‰ | åŸºæœ¬æ’åˆ—ç”Ÿæˆ | [LeetCode 46](https://leetcode-cn.com/problems/permutations/) |
| å…¨æ’åˆ— II | ä¸­ç­‰ | å«é‡å¤å…ƒç´ çš„æ’åˆ— | [LeetCode 47](https://leetcode-cn.com/problems/permutations-ii/) |
| ç»„åˆ | ä¸­ç­‰ | åŸºæœ¬ç»„åˆç”Ÿæˆ | [LeetCode 77](https://leetcode-cn.com/problems/combinations/) |
| ç»„åˆæ€»å’Œ | ä¸­ç­‰ | å…ƒç´ å¯é‡å¤ä½¿ç”¨çš„ç»„åˆ | [LeetCode 39](https://leetcode-cn.com/problems/combination-sum/) |
| ç»„åˆæ€»å’Œ II | ä¸­ç­‰ | å…ƒç´ ä¸å¯é‡å¤ä½¿ç”¨çš„ç»„åˆ | [LeetCode 40](https://leetcode-cn.com/problems/combination-sum-ii/) |
| å­é›† | ä¸­ç­‰ | ç»„åˆçš„æ‰©å±• | [LeetCode 78](https://leetcode-cn.com/problems/subsets/) |
| ç”µè¯å·ç çš„å­—æ¯ç»„åˆ | ä¸­ç­‰ | å­—ç¬¦ç»„åˆ | [LeetCode 17](https://leetcode-cn.com/problems/letter-combinations-of-a-phone-number/) |
| æ‹¬å·ç”Ÿæˆ | ä¸­ç­‰ | ç‰¹æ®Šç»„åˆé—®é¢˜ | [LeetCode 22](https://leetcode-cn.com/problems/generate-parentheses/) |

## âš ï¸ æ³¨æ„äº‹é¡¹
1. **æ’åˆ—ä¸ç»„åˆçš„åŒºåˆ«**ï¼šæ’åˆ—å¼ºè°ƒé¡ºåºï¼Œç»„åˆä¸è€ƒè™‘é¡ºåºï¼Œå®ç°ä¸Šé€šè¿‡startå‚æ•°æ§åˆ¶
2. **å»é‡å‰æ**ï¼šå¤„ç†é‡å¤å…ƒç´ å¿…é¡»å…ˆæ’åºï¼Œå¦åˆ™å‰ªæé€»è¾‘æ— æ³•ç”Ÿæ•ˆ
3. **usedæ•°ç»„ç”¨æ³•**ï¼šæ’åˆ—é—®é¢˜éœ€è¦usedæ•°ç»„æ ‡è®°ä½¿ç”¨çŠ¶æ€ï¼Œç»„åˆé—®é¢˜é€šè¿‡startå‚æ•°é¿å…é‡å¤
4. **é‡å¤å…ƒç´ åˆ¤æ–­**ï¼šæ’åˆ—å»é‡æ¡ä»¶æ˜¯`i > 0 && nums[i] == nums[i-1] && !used[i-1]`ï¼Œç»„åˆå»é‡æ¡ä»¶æ˜¯`i > start && nums[i] == nums[i-1]`
5. **å‰ªææ—¶æœº**ï¼šè¶Šæ—©å‰ªææ•ˆç‡è¶Šé«˜ï¼Œå°½é‡åœ¨è¿›å…¥é€’å½’å‰å‰ªæ
6. **è·¯å¾„å¤åˆ¶**ï¼šæ·»åŠ ç»“æœæ—¶å¿…é¡»åˆ›å»ºæ–°çš„åˆ—è¡¨å¯¹è±¡ï¼Œé¿å…å¼•ç”¨é—®é¢˜
7. **é€’å½’ç»ˆæ­¢æ¡ä»¶**ï¼šæ’åˆ—é—®é¢˜ç»ˆæ­¢æ¡ä»¶æ˜¯path.size() == nums.lengthï¼Œç»„åˆé—®é¢˜æ˜¯path.size() == k
8. **æ—¶é—´å¤æ‚åº¦**ï¼šæ’åˆ—é—®é¢˜ä¸ºO(nÃ—n!)ï¼Œç»„åˆé—®é¢˜ä¸ºO(2â¿)ï¼Œnä¸ºå…ƒç´ ä¸ªæ•°

## ğŸ“ æœ€ä½³å®è·µ
- **æ˜ç¡®é—®é¢˜ç±»å‹**ï¼šå…ˆç¡®å®šæ˜¯æ’åˆ—è¿˜æ˜¯ç»„åˆé—®é¢˜ï¼Œé€‰æ‹©åˆé€‚çš„å›æº¯ç­–ç•¥
- **æŒæ¡å»é‡æŠ€å·§**ï¼šç†Ÿç»ƒè¿ç”¨æ’åº+å‰ªæçš„å»é‡æ–¹æ³•
- **å–„ç”¨å‰ªæä¼˜åŒ–**ï¼šæ ¹æ®é—®é¢˜ç‰¹ç‚¹æ·»åŠ åˆé€‚çš„å‰ªææ¡ä»¶
- **ç†è§£é€’å½’æ ‘**ï¼šç”»å‡ºé€’å½’æ ‘å¸®åŠ©ç†è§£æœç´¢è¿‡ç¨‹å’Œå‰ªæä½ç½®
- **å¯¹æ¯”ä¸åŒå®ç°**ï¼šæ¯”è¾ƒä½¿ç”¨usedæ•°ç»„å’Œäº¤æ¢å…ƒç´ ä¸¤ç§æ’åˆ—å®ç°æ–¹å¼
- **ç©ºé—´ä¼˜åŒ–**ï¼šè€ƒè™‘ä½¿ç”¨ä½è¿ç®—ä»£æ›¿æ•°ç»„è®°å½•ä½¿ç”¨çŠ¶æ€
- **è¿­ä»£å®ç°**ï¼šäº†è§£æ’åˆ—ç»„åˆçš„éé€’å½’å®ç°æ–¹æ³•ï¼Œå¦‚ä½¿ç”¨å­—å…¸åº
- **å®é™…åº”ç”¨**ï¼šå°†æ’åˆ—ç»„åˆæ€æƒ³åº”ç”¨äºå¯†ç ç ´è§£ã€æ•°æ®åˆ†æã€æ¸¸æˆè®¾è®¡ç­‰åœºæ™¯

---