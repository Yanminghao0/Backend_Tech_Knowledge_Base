## è§‚å¯Ÿè€…æ¨¡å¼ (Observer Pattern)

### æ¦‚è¿°
è§‚å¯Ÿè€…æ¨¡å¼ï¼ˆObserver Patternï¼‰å®šä¹‰äº†å¯¹è±¡ä¹‹é—´çš„ä¸€å¯¹å¤šä¾èµ–å…³ç³»ï¼Œå½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½ä¼šè‡ªåŠ¨æ”¶åˆ°é€šçŸ¥å¹¶æ›´æ–°ã€‚è¿™ç§æ¨¡å¼å±äºè¡Œä¸ºå‹æ¨¡å¼ï¼Œä¹Ÿç§°ä¸ºå‘å¸ƒ-è®¢é˜…ï¼ˆPublish-Subscribeï¼‰æ¨¡å¼ã€‚

## ğŸ¯ æ¨¡å¼æ„å›¾

**æ ¸å¿ƒæ€æƒ³**ï¼šè§‚å¯Ÿè€…æ¨¡å¼å®šä¹‰äº†ä¸€ç§ä¸€å¯¹å¤šçš„ä¾èµ–å…³ç³»ï¼Œè®©å¤šä¸ªè§‚å¯Ÿè€…å¯¹è±¡åŒæ—¶ç›‘å¬æŸä¸€ä¸ªä¸»é¢˜å¯¹è±¡ã€‚å½“ä¸»é¢˜å¯¹è±¡çŠ¶æ€å‘ç”Ÿå˜åŒ–æ—¶ï¼Œå®ƒçš„æ‰€æœ‰è§‚å¯Ÿè€…éƒ½ä¼šæ”¶åˆ°é€šçŸ¥å¹¶è‡ªåŠ¨æ›´æ–°ã€‚

**è§£å†³çš„é—®é¢˜**ï¼š
- å¦‚ä½•å»ºç«‹å¯¹è±¡ä¹‹é—´çš„åŠ¨æ€ä¾èµ–å…³ç³»
- å¦‚ä½•å®ç°å½“ä¸€ä¸ªå¯¹è±¡çŠ¶æ€æ”¹å˜æ—¶ï¼Œè‡ªåŠ¨é€šçŸ¥å…¶ä»–å¯¹è±¡
- å¦‚ä½•è§£è€¦è¢«è§‚å¯Ÿè€…å’Œè§‚å¯Ÿè€…
- å¦‚ä½•æ”¯æŒåŠ¨æ€æ·»åŠ å’Œç§»é™¤è§‚å¯Ÿè€…

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸ“¡ **äº‹ä»¶å¤„ç†ç³»ç»Ÿ**ï¼šå¦‚GUIç»„ä»¶äº‹ä»¶ç›‘å¬
- ğŸ“° **æ¶ˆæ¯é€šçŸ¥ç³»ç»Ÿ**ï¼šå¦‚é‚®ä»¶è®¢é˜…ã€æ¶ˆæ¯æ¨é€
- ğŸ“Š **æ•°æ®ç›‘æ§ç³»ç»Ÿ**ï¼šå¦‚è‚¡ç¥¨è¡Œæƒ…å®æ—¶æ›´æ–°
- ğŸ”„ **çŠ¶æ€åŒæ­¥ç³»ç»Ÿ**ï¼šå¤šè§†å›¾åŒæ­¥æ˜¾ç¤ºåŒä¸€æ•°æ®
- ğŸš¦ **å‘å¸ƒ-è®¢é˜…ç³»ç»Ÿ**ï¼šå¦‚æ¶ˆæ¯é˜Ÿåˆ—ã€äº‹ä»¶æ€»çº¿
- ğŸ“± **å“åº”å¼ç¼–ç¨‹**ï¼šå¦‚RxJavaã€ReactiveX

## ğŸ—ï¸ UMLç±»å›¾

```mermaid
classDiagram
    class Subject {
        <<interface>>
        +registerObserver(observer: Observer): void
        +removeObserver(observer: Observer): void
        +notifyObservers(): void
    }
    class ConcreteSubject {
        -observers: List~Observer~
        -state: int
        +registerObserver(observer: Observer): void
        +removeObserver(observer: Observer): void
        +notifyObservers(): void
        +setState(state: int): void
        +getState(): int
    }
    class Observer {
        <<interface>>
        +update(): void
    }
    class ConcreteObserver1 {
        -subject: Subject
        -observerState: int
        +ConcreteObserver1(subject: Subject)
        +update(): void
    }
    class ConcreteObserver2 {
        -subject: Subject
        -observerState: int
        +ConcreteObserver2(subject: Subject)
        +update(): void
    }
    class Client {
    }

    Subject <|-- ConcreteSubject
    Observer <|-- ConcreteObserver1
    Observer <|-- ConcreteObserver2
    ConcreteSubject --> Observer : observers
    ConcreteObserver1 --> Subject
    ConcreteObserver2 --> Subject
    Client --> Subject
    Client --> Observer
```

**æ ¸å¿ƒè§’è‰²**ï¼š
- **Subjectï¼ˆä¸»é¢˜/è¢«è§‚å¯Ÿè€…ï¼‰**ï¼šå®šä¹‰æ³¨å†Œã€ç§»é™¤å’Œé€šçŸ¥è§‚å¯Ÿè€…çš„æ¥å£
- **ConcreteSubjectï¼ˆå…·ä½“ä¸»é¢˜ï¼‰**ï¼šå®ç°ä¸»é¢˜æ¥å£ï¼Œç»´æŠ¤çŠ¶æ€ï¼Œé€šçŸ¥è§‚å¯Ÿè€…
- **Observerï¼ˆè§‚å¯Ÿè€…ï¼‰**ï¼šå®šä¹‰æ›´æ–°æ¥å£ï¼Œåœ¨ä¸»é¢˜çŠ¶æ€å˜åŒ–æ—¶æ›´æ–°è‡ªå·±
- **ConcreteObserverï¼ˆå…·ä½“è§‚å¯Ÿè€…ï¼‰**ï¼šå®ç°è§‚å¯Ÿè€…æ¥å£ï¼Œä¿å­˜ä¸ä¸»é¢˜çš„å¼•ç”¨ï¼Œæ›´æ–°è‡ªèº«çŠ¶æ€
- **Clientï¼ˆå®¢æˆ·ç«¯ï¼‰**ï¼šåˆ›å»ºä¸»é¢˜å’Œè§‚å¯Ÿè€…å¯¹è±¡ï¼Œå»ºç«‹å®ƒä»¬ä¹‹é—´çš„è”ç³»

**è§‚å¯Ÿè€…æ¨¡å¼å˜ä½“**ï¼š
1. **æ¨æ¨¡å‹**ï¼šä¸»é¢˜ä¸»åŠ¨å‘è§‚å¯Ÿè€…æ¨é€è¯¦ç»†ä¿¡æ¯
2. **æ‹‰æ¨¡å‹**ï¼šè§‚å¯Ÿè€…ä¸»åŠ¨ä»ä¸»é¢˜æ‹‰å–æ‰€éœ€ä¿¡æ¯
3. **äº‹ä»¶é©±åŠ¨**ï¼šåŸºäºäº‹ä»¶å¯¹è±¡ä¼ é€’é€šçŸ¥
4. **åˆ†å±‚è§‚å¯Ÿè€…**ï¼šè§‚å¯Ÿè€…å¯ä»¥åŒæ—¶æ˜¯ä¸»é¢˜

## ğŸ’» ä»£ç å®ç°

### 1. åŸºç¡€å®ç°ï¼ˆæ¨æ¨¡å‹ï¼‰

```java
// è§‚å¯Ÿè€…æ¥å£
public interface Observer {
    void update(int state);
}

// ä¸»é¢˜æ¥å£
public interface Subject {
    void registerObserver(Observer observer);
    void removeObserver(Observer observer);
    void notifyObservers();
}

// å…·ä½“ä¸»é¢˜
public class ConcreteSubject implements Subject {
    private List<Observer> observers = new ArrayList<>();
    private int state;

    @Override
    public void registerObserver(Observer observer) {
        observers.add(observer);
    }

    @Override
    public void removeObserver(Observer observer) {
        observers.remove(observer);
    }

    @Override
    public void notifyObservers() {
        for (Observer observer : observers) {
            observer.update(state);
        }
    }

    public void setState(int state) {
        this.state = state;
        notifyObservers(); // çŠ¶æ€æ”¹å˜æ—¶é€šçŸ¥è§‚å¯Ÿè€…
    }

    public int getState() {
        return state;
    }
}

// å…·ä½“è§‚å¯Ÿè€…1
public class ConcreteObserver1 implements Observer {
    private Subject subject;
    private int observerState;

    public ConcreteObserver1(Subject subject) {
        this.subject = subject;
        this.subject.registerObserver(this);
    }

    @Override
    public void update(int state) {
        observerState = state;
        System.out.println("è§‚å¯Ÿè€…1æ”¶åˆ°æ›´æ–°ï¼ŒçŠ¶æ€å˜ä¸º: " + observerState);
        display();
    }

    public void display() {
        System.out.println("è§‚å¯Ÿè€…1å½“å‰çŠ¶æ€: " + observerState);
    }
}

// å…·ä½“è§‚å¯Ÿè€…2
public class ConcreteObserver2 implements Observer {
    private Subject subject;
    private int observerState;

    public ConcreteObserver2(Subject subject) {
        this.subject = subject;
        this.subject.registerObserver(this);
    }

    @Override
    public void update(int state) {
        observerState = state * 2; // è§‚å¯Ÿè€…2å¯¹çŠ¶æ€è¿›è¡Œç‰¹æ®Šå¤„ç†
        System.out.println("è§‚å¯Ÿè€…2æ”¶åˆ°æ›´æ–°ï¼ŒçŠ¶æ€å˜ä¸º: " + observerState);
        display();
    }

    public void display() {
        System.out.println("è§‚å¯Ÿè€…2å½“å‰çŠ¶æ€: " + observerState);
    }
}

// å®¢æˆ·ç«¯ä»£ç 
public class Client {
    public static void main(String[] args) {
        // åˆ›å»ºä¸»é¢˜
        ConcreteSubject subject = new ConcreteSubject();

        // åˆ›å»ºè§‚å¯Ÿè€…å¹¶æ³¨å†Œ
        Observer observer1 = new ConcreteObserver1(subject);
        Observer observer2 = new ConcreteObserver2(subject);

        // æ”¹å˜ä¸»é¢˜çŠ¶æ€
        System.out.println("----- è®¾ç½®çŠ¶æ€ä¸º10 -----\n");
        subject.setState(10);

        // æ”¹å˜ä¸»é¢˜çŠ¶æ€
        System.out.println("\n----- è®¾ç½®çŠ¶æ€ä¸º20 -----\n");
        subject.setState(20);

        // ç§»é™¤ä¸€ä¸ªè§‚å¯Ÿè€…
        System.out.println("\n----- ç§»é™¤è§‚å¯Ÿè€…2 -----\n");
        subject.removeObserver(observer2);

        // å†æ¬¡æ”¹å˜ä¸»é¢˜çŠ¶æ€
        System.out.println("\n----- è®¾ç½®çŠ¶æ€ä¸º30 -----\n");
        subject.setState(30);
    }
}
```

### 2. æ‹‰æ¨¡å‹å®ç°

```java
// æ‹‰æ¨¡å‹çš„è§‚å¯Ÿè€…æ¥å£
public interface ObserverPull {
    void update(SubjectPull subject);
}

// æ‹‰æ¨¡å‹çš„ä¸»é¢˜æ¥å£
public interface SubjectPull {
    void registerObserver(ObserverPull observer);
    void removeObserver(ObserverPull observer);
    void notifyObservers();
}

// æ‹‰æ¨¡å‹çš„å…·ä½“ä¸»é¢˜
public class ConcreteSubjectPull implements SubjectPull {
    private List<ObserverPull> observers = new ArrayList<>();
    private int state;
    private String message;

    @Override
    public void registerObserver(ObserverPull observer) {
        observers.add(observer);
    }

    @Override
    public void removeObserver(ObserverPull observer) {
        observers.remove(observer);
    }

    @Override
    public void notifyObservers() {
        for (ObserverPull observer : observers) {
            observer.update(this); // ä¼ é€’è‡ªèº«å¼•ç”¨
        }
    }

    public void setState(int state, String message) {
        this.state = state;
        this.message = message;
        notifyObservers();
    }

    // æä¾›getteræ–¹æ³•ä¾›è§‚å¯Ÿè€…æ‹‰å–æ•°æ®
    public int getState() { return state; }
    public String getMessage() { return message; }
}

// æ‹‰æ¨¡å‹çš„å…·ä½“è§‚å¯Ÿè€…
public class ConcreteObserverPull implements ObserverPull {
    private int observerState;
    private String observerMessage;

    @Override
    public void update(SubjectPull subject) {
        // ä¸»åŠ¨æ‹‰å–æ‰€éœ€æ•°æ®
        ConcreteSubjectPull concreteSubject = (ConcreteSubjectPull) subject;
        this.observerState = concreteSubject.getState();
        this.observerMessage = concreteSubject.getMessage();

        System.out.println("æ‹‰æ¨¡å‹è§‚å¯Ÿè€…æ”¶åˆ°æ›´æ–° - çŠ¶æ€: " + observerState + ", æ¶ˆæ¯: " + observerMessage);
    }
}

// æ‹‰æ¨¡å‹å®¢æˆ·ç«¯
public class ClientPull {
    public static void main(String[] args) {
        ConcreteSubjectPull subject = new ConcreteSubjectPull();
        ObserverPull observer = new ConcreteObserverPull();
        subject.registerObserver(observer);

        subject.setState(10, "æ‹‰æ¨¡å‹æµ‹è¯•æ¶ˆæ¯");
    }
}
```

### 3. Javaå†…ç½®è§‚å¯Ÿè€…æ¨¡å¼å®ç°

```java
import java.util.Observable;
import java.util.Observer;

// Javaå†…ç½®Observableå®ç°ä¸»é¢˜
public class WeatherData extends Observable {
    private float temperature;
    private float humidity;
    private float pressure;

    public WeatherData() {}

    public void measurementsChanged() {
        setChanged(); // æ ‡è®°çŠ¶æ€å·²æ”¹å˜
        notifyObservers(); // é€šçŸ¥è§‚å¯Ÿè€…
        // ä¹Ÿå¯ä»¥ä¼ é€’æ•°æ®å¯¹è±¡: notifyObservers(data);
    }

    public void setMeasurements(float temperature, float humidity, float pressure) {
        this.temperature = temperature;
        this.humidity = humidity;
        this.pressure = pressure;
        measurementsChanged();
    }

    // Getteræ–¹æ³•ä¾›è§‚å¯Ÿè€…æ‹‰å–æ•°æ®
    public float getTemperature() { return temperature; }
    public float getHumidity() { return humidity; }
    public float getPressure() { return pressure; }
}

// æ˜¾ç¤ºæ¥å£
public interface DisplayElement {
    void display();
}

// å…·ä½“è§‚å¯Ÿè€…ï¼šå½“å‰æ¡ä»¶æ˜¾ç¤ºå™¨
public class CurrentConditionsDisplay implements Observer, DisplayElement {
    private Observable observable;
    private float temperature;
    private float humidity;

    public CurrentConditionsDisplay(Observable observable) {
        this.observable = observable;
        observable.addObserver(this);
    }

    @Override
    public void update(Observable o, Object arg) {
        if (o instanceof WeatherData) {
            WeatherData weatherData = (WeatherData) o;
            this.temperature = weatherData.getTemperature();
            this.humidity = weatherData.getHumidity();
            display();
        }
    }

    @Override
    public void display() {
        System.out.println("å½“å‰æ¡ä»¶: æ¸©åº¦ " + temperature + "Â°C, æ¹¿åº¦ " + humidity + "%");
    }
}

// å…·ä½“è§‚å¯Ÿè€…ï¼šç»Ÿè®¡æ˜¾ç¤ºå™¨
public class StatisticsDisplay implements Observer, DisplayElement {
    private float maxTemp = 0.0f;
    private float minTemp = 200;
    private float tempSum = 0.0f;
    private int numReadings;

    public StatisticsDisplay(Observable observable) {
        observable.addObserver(this);
    }

    @Override
    public void update(Observable o, Object arg) {
        if (o instanceof WeatherData) {
            WeatherData weatherData = (WeatherData) o;
            float temp = weatherData.getTemperature();
            tempSum += temp;
            numReadings++;

            if (temp > maxTemp) maxTemp = temp;
            if (temp < minTemp) minTemp = temp;

            display();
        }
    }

    @Override
    public void display() {
        System.out.println("æ¸©åº¦ç»Ÿè®¡: å¹³å‡ " + (tempSum / numReadings) + "Â°C, æœ€é«˜ " + maxTemp + "Â°C, æœ€ä½ " + minTemp + "Â°C");
    }
}

// æ°”è±¡ç«™å®¢æˆ·ç«¯
public class WeatherStation {
    public static void main(String[] args) {
        WeatherData weatherData = new WeatherData();

        CurrentConditionsDisplay currentDisplay = new CurrentConditionsDisplay(weatherData);
        StatisticsDisplay statisticsDisplay = new StatisticsDisplay(weatherData);

        weatherData.setMeasurements(22.5f, 65f, 1013.1f);
        weatherData.setMeasurements(24.0f, 70f, 1012.9f);
        weatherData.setMeasurements(21.8f, 60f, 1013.5f);
    }
}
```

## ğŸ” æºç åº”ç”¨

### Javaä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼
- **`java.util.Observable`**ï¼šJavaå†…ç½®çš„è¢«è§‚å¯Ÿè€…ç±»
- **`java.util.Observer`**ï¼šJavaå†…ç½®çš„è§‚å¯Ÿè€…æ¥å£
- **`java.beans.PropertyChangeListener`**ï¼šJavaBeanå±æ€§å˜æ›´ç›‘å¬
- **`java.awt.event.EventListener`**ï¼šAWTäº‹ä»¶ç›‘å¬ä½“ç³»

```java
// Java Swingä¸­çš„è§‚å¯Ÿè€…æ¨¡å¼åº”ç”¨
public class SwingObserverExample {
    public static void main(String[] args) {
        JFrame frame = new JFrame("è§‚å¯Ÿè€…æ¨¡å¼ç¤ºä¾‹");
        JButton button = new JButton("ç‚¹å‡»æˆ‘");

        // æ·»åŠ è§‚å¯Ÿè€…ï¼ˆç›‘å¬å™¨ï¼‰
        button.addActionListener(e -> System.out.println("æŒ‰é’®è¢«ç‚¹å‡»äº† - ç›‘å¬å™¨1"));
        button.addActionListener(e -> System.out.println("æŒ‰é’®è¢«ç‚¹å‡»äº† - ç›‘å¬å™¨2"));

        frame.add(button);
        frame.setSize(300, 200);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
}
```

### Springæ¡†æ¶ä¸­çš„åº”ç”¨
- **`org.springframework.context.ApplicationListener`**ï¼šSpringäº‹ä»¶ç›‘å¬
- **`org.springframework.context.event.ApplicationEventMulticaster`**ï¼šäº‹ä»¶å¹¿æ’­å™¨
- **`org.springframework.context.event.EventListener`**ï¼šäº‹ä»¶ç›‘å¬æ³¨è§£
- **`org.springframework.beans.factory.config.BeanPostProcessor`**ï¼šBeanåç½®å¤„ç†å™¨

```java
// Springäº‹ä»¶ç›‘å¬ç¤ºä¾‹
public class SpringObserverExample {
    // è‡ªå®šä¹‰äº‹ä»¶
    public static class MyEvent extends ApplicationEvent {
        private String message;

        public MyEvent(Object source, String message) {
            super(source);
            this.message = message;
        }

        public String getMessage() { return message; }
    }

    // äº‹ä»¶å‘å¸ƒè€…
    @Component
    public static class MyEventPublisher {
        @Autowired
        private ApplicationEventPublisher publisher;

        public void publishEvent(String message) {
            publisher.publishEvent(new MyEvent(this, message));
        }
    }

    // äº‹ä»¶ç›‘å¬è€…1
    @Component
    public static class MyEventListener1 implements ApplicationListener<MyEvent> {
        @Override
        public void onApplicationEvent(MyEvent event) {
            System.out.println("ç›‘å¬å™¨1æ”¶åˆ°äº‹ä»¶: " + event.getMessage());
        }
    }

    // äº‹ä»¶ç›‘å¬è€…2ï¼ˆæ³¨è§£æ–¹å¼ï¼‰
    @Component
    public static class MyEventListener2 {
        @EventListener
        public void handleEvent(MyEvent event) {
            System.out.println("ç›‘å¬å™¨2æ”¶åˆ°äº‹ä»¶: " + event.getMessage());
        }
    }

    // å¯åŠ¨ç±»
    public static void main(String[] args) {
        ApplicationContext context = new AnnotationConfigApplicationContext(
            MyEventPublisher.class, MyEventListener1.class, MyEventListener2.class);

        MyEventPublisher publisher = context.getBean(MyEventPublisher.class);
        publisher.publishEvent("Hello, Spring Observer!");
    }
}
```

### å…¶ä»–æ¡†æ¶ä¸­çš„åº”ç”¨
- **RxJava/RxAndroid**ï¼šå“åº”å¼ç¼–ç¨‹åº“
- **Google Guava EventBus**ï¼šäº‹ä»¶æ€»çº¿
- **Apache Camel EventNotifier**ï¼šæ¶ˆæ¯è·¯ç”±äº‹ä»¶
- **Spring Cloud Stream**ï¼šæ¶ˆæ¯é©±åŠ¨å¾®æœåŠ¡
- **Vue.js/React**ï¼šå‰ç«¯æ¡†æ¶çš„å“åº”å¼ç³»ç»Ÿ
- **Node.js EventEmitter**ï¼šNode.jsäº‹ä»¶å‘å°„å™¨

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **å†…å­˜æ³„æ¼é£é™©**ï¼šè§‚å¯Ÿè€…æœªæ­£ç¡®ç§»é™¤å¯èƒ½å¯¼è‡´å†…å­˜æ³„æ¼

2. **é€šçŸ¥é¡ºåº**ï¼šé»˜è®¤é€šçŸ¥é¡ºåºä¸ä¿è¯ï¼Œå¯èƒ½å¯¼è‡´ä¾èµ–é¡ºåºçš„é—®é¢˜

3. **å¾ªç¯ä¾èµ–**ï¼šè§‚å¯Ÿè€…å’Œä¸»é¢˜ç›¸äº’å¼•ç”¨å¯èƒ½å¯¼è‡´å¾ªç¯ä¾èµ–

4. **æ€§èƒ½é—®é¢˜**ï¼šè§‚å¯Ÿè€…è¿‡å¤šæˆ–é€šçŸ¥è¿‡äºé¢‘ç¹å¯èƒ½å½±å“æ€§èƒ½

5. **çº¿ç¨‹å®‰å…¨**ï¼šå¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è€ƒè™‘åŒæ­¥é—®é¢˜

6. **è¿‡åº¦é€šçŸ¥**ï¼šé¿å…ä¸å¿…è¦çš„é€šçŸ¥ï¼Œä¼˜åŒ–é€šçŸ¥æ¡ä»¶

7. **çŠ¶æ€ä¸€è‡´æ€§**ï¼šç¡®ä¿é€šçŸ¥æ—¶ä¸»é¢˜çŠ¶æ€å·²ç¨³å®š

8. **å¼‚å¸¸å¤„ç†**ï¼šä¸€ä¸ªè§‚å¯Ÿè€…çš„å¼‚å¸¸ä¸åº”å½±å“å…¶ä»–è§‚å¯Ÿè€…

## ğŸ“ æœ€ä½³å®è·µ

1. **ä½¿ç”¨æ¥å£**ï¼šé€šè¿‡æ¥å£å®šä¹‰è§‚å¯Ÿè€…å’Œä¸»é¢˜å¥‘çº¦

2. **æä¾›æ³¨é”€æœºåˆ¶**ï¼šç¡®ä¿è§‚å¯Ÿè€…å¯ä»¥æ­£ç¡®æ³¨é”€ï¼Œé˜²æ­¢å†…å­˜æ³„æ¼

3. **é€‰æ‹©åˆé€‚çš„æ¨¡å‹**ï¼šæ¨æ¨¡å‹é€‚åˆç®€å•åœºæ™¯ï¼Œæ‹‰æ¨¡å‹é€‚åˆè§‚å¯Ÿè€…éœ€è¦è‡ªä¸»é€‰æ‹©æ•°æ®çš„åœºæ™¯

4. **ä½¿ç”¨äº‹ä»¶å¯¹è±¡**ï¼šé€šè¿‡äº‹ä»¶å¯¹è±¡å°è£…æ›´å¤šä¿¡æ¯

```java
// äº‹ä»¶å¯¹è±¡ç¤ºä¾‹
public class Event {
    private Object source;
    private long timestamp;
    private Map<String, Object> data;

    public Event(Object source) {
        this.source = source;
        this.timestamp = System.currentTimeMillis();
        this.data = new HashMap<>();
    }

    // Getters and setters
}
```

5. **æ”¯æŒå¼‚æ­¥é€šçŸ¥**ï¼šé•¿æ—¶é—´è¿è¡Œçš„è§‚å¯Ÿè€…æ“ä½œåº”å¼‚æ­¥æ‰§è¡Œ

6. **ä½¿ç”¨å¼±å¼•ç”¨**ï¼šå¯¹äºä¸´æ—¶è§‚å¯Ÿè€…ï¼Œè€ƒè™‘ä½¿ç”¨å¼±å¼•ç”¨é¿å…å†…å­˜æ³„æ¼

7. **é™åˆ¶é€šçŸ¥èŒƒå›´**ï¼šå…è®¸è§‚å¯Ÿè€…è®¢é˜…ç‰¹å®šç±»å‹çš„é€šçŸ¥

8. **å®ç°å±‚çº§é€šçŸ¥**ï¼šæ”¯æŒäº‹ä»¶å†’æ³¡æˆ–å±‚çº§é€šçŸ¥æœºåˆ¶

9. **ä½¿ç”¨çº¿ç¨‹æ± **ï¼šå¤„ç†å¤šä¸ªè§‚å¯Ÿè€…æ—¶ä½¿ç”¨çº¿ç¨‹æ± æé«˜æ€§èƒ½

10. **æ·»åŠ è°ƒè¯•ä¿¡æ¯**ï¼šè®°å½•é€šçŸ¥è¿‡ç¨‹ï¼Œä¾¿äºè°ƒè¯•

## ğŸ“š ç›¸å…³æ¨¡å¼

- **ä¸­ä»‹è€…æ¨¡å¼**ï¼šéƒ½æ¶‰åŠå¤šä¸ªå¯¹è±¡é€šä¿¡ï¼Œä½†ä¸­ä»‹è€…æ¨¡å¼é€šè¿‡ä¸­å¤®æ§åˆ¶ï¼Œè§‚å¯Ÿè€…æ¨¡å¼æ˜¯åˆ†å¸ƒå¼çš„
- **å•ä¾‹æ¨¡å¼**ï¼šä¸»é¢˜é€šå¸¸è®¾è®¡ä¸ºå•ä¾‹
- **å‘½ä»¤æ¨¡å¼**ï¼šå¯ä»¥å°†é€šçŸ¥å°è£…ä¸ºå‘½ä»¤å¯¹è±¡
- **çŠ¶æ€æ¨¡å¼**ï¼šçŠ¶æ€å˜åŒ–æ—¶é€šå¸¸ä¼šé€šçŸ¥è§‚å¯Ÿè€…
- **è£…é¥°å™¨æ¨¡å¼**ï¼šå¯ä»¥åŠ¨æ€ç»™è§‚å¯Ÿè€…æ·»åŠ åŠŸèƒ½
- **è¿­ä»£å™¨æ¨¡å¼**ï¼šä¸»é¢˜éå†è§‚å¯Ÿè€…æ—¶ä½¿ç”¨è¿­ä»£å™¨
- **ä»£ç†æ¨¡å¼**ï¼šè¿œç¨‹è§‚å¯Ÿè€…å¯ä»¥é€šè¿‡ä»£ç†å®ç°
- **å·¥å‚æ¨¡å¼**ï¼šåˆ›å»ºè§‚å¯Ÿè€…å’Œä¸»é¢˜çš„å·¥å‚