# é€‚é…å™¨æ¨¡å¼ï¼ˆAdapter Patternï¼‰

> å°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£

---

## ğŸ“‹ åŸºæœ¬ä¿¡æ¯

- **ç±»å‹**: ç»“æ„å‹æ¨¡å¼
- **éš¾åº¦**: â­â­
- **ä½¿ç”¨é¢‘ç‡**: â­â­â­â­
- **å…³é”®è¯**: æ¥å£è½¬æ¢ã€ç±»é€‚é…å™¨ã€å¯¹è±¡é€‚é…å™¨

---

## ğŸ¯ æ¨¡å¼æ„å›¾

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†ä¸€ä¸ªç±»çš„æ¥å£è½¬æ¢æˆå®¢æˆ·ç«¯æœŸæœ›çš„å¦ä¸€ä¸ªæ¥å£ï¼Œä½¿å¾—åŸæœ¬ç”±äºæ¥å£ä¸å…¼å®¹è€Œä¸èƒ½ä¸€èµ·å·¥ä½œçš„é‚£äº›ç±»å¯ä»¥ä¸€èµ·å·¥ä½œã€‚

**è§£å†³çš„é—®é¢˜**ï¼š
- ç³»ç»Ÿéœ€è¦ä½¿ç”¨ç°æœ‰çš„ç±»ï¼Œä½†è¯¥ç±»çš„æ¥å£ä¸ç¬¦åˆç³»ç»Ÿçš„éœ€è¦
- å¸Œæœ›åˆ›å»ºä¸€ä¸ªå¯ä»¥å¤ç”¨çš„ç±»ï¼Œç”¨äºä¸ä¸€äº›å½¼æ­¤ä¹‹é—´æ²¡æœ‰å¤ªå¤§å…³è”çš„ç±»æˆ–å¯èƒ½åœ¨å°†æ¥å¼•è¿›çš„ç±»ä¸€èµ·å·¥ä½œ
- éœ€è¦ä¸€ä¸ªç»Ÿä¸€çš„è¾“å‡ºæ¥å£ï¼Œè€Œè¾“å…¥ç«¯çš„ç±»å‹ä¸å¯é¢„çŸ¥

**é€‚ç”¨åœºæ™¯**ï¼š
- ğŸƒ **ç¬¬ä¸‰æ–¹åº“é›†æˆ**ï¼šå½“éœ€è¦é›†æˆä¸€ä¸ªå¤–éƒ¨åº“ï¼Œä½†å®ƒçš„æ¥å£ä¸ä½ çš„ç³»ç»Ÿä¸åŒ¹é…æ—¶
- ğŸ”„ **æ—§ç³»ç»Ÿæ”¹é€ **ï¼šåœ¨ä¸ä¿®æ”¹åŸæœ‰ä»£ç çš„æƒ…å†µä¸‹ï¼Œä¸ºæ—§ç³»ç»Ÿæä¾›æ–°çš„æ¥å£
- ğŸ§© **é€‚é…ä¸åŒæ•°æ®æ ¼å¼**ï¼šå¦‚JSONä¸XMLä¹‹é—´çš„è½¬æ¢
- ğŸ–¥ï¸ **è·¨å¹³å°å¼€å‘**ï¼šä¸ºä¸åŒå¹³å°æä¾›ç»Ÿä¸€æ¥å£
- ğŸ“± **è®¾å¤‡é©±åŠ¨ç¨‹åº**ï¼šä¸ºä¸åŒè®¾å¤‡æä¾›ç»Ÿä¸€çš„æ¥å£

## ğŸ—ï¸ UMLç±»å›¾

```mermaid
classDiagram
    class Client {
        +request()
    }
    class Target {
        <<interface>>
        +request()
    }
    class Adapter {
        -adaptee: Adaptee
        +request()
    }
    class Adaptee {
        +specificRequest()
    }

    Client --> Target : ä¾èµ–
    Target <|.. Adapter : å®ç°
    Adapter --> Adaptee : ç»„åˆ
    Client --> Adapter : ä½¿ç”¨
```

**ç±»å›¾è¯´æ˜**ï¼š
- `Target`ï¼šç›®æ ‡æ¥å£ï¼Œå®¢æˆ·ç«¯æœŸæœ›çš„æ¥å£
- `Adaptee`ï¼šéœ€è¦é€‚é…çš„ç±»ï¼Œæ‹¥æœ‰ç‰¹æ®ŠåŠŸèƒ½ä½†æ¥å£ä¸å…¼å®¹
- `Adapter`ï¼šé€‚é…å™¨ç±»ï¼Œå®ç°Targetæ¥å£å¹¶åŒ…è£…ä¸€ä¸ªAdapteeå¯¹è±¡
- `Client`ï¼šå®¢æˆ·ç«¯ï¼Œä½¿ç”¨Targetæ¥å£

## ğŸ’» ä»£ç å®ç°

### 1. ç±»é€‚é…å™¨ï¼ˆç»§æ‰¿æ–¹å¼ï¼‰

```java
// ç›®æ ‡æ¥å£
public interface Target {
    void request();
}

// éœ€è¦é€‚é…çš„ç±»
public class Adaptee {
    public void specificRequest() {
        System.out.println("Adaptee: æ‰§è¡Œç‰¹æ®Šè¯·æ±‚");
    }
}

// ç±»é€‚é…å™¨ï¼ˆç»§æ‰¿Adapteeå¹¶å®ç°Targetæ¥å£ï¼‰
public class ClassAdapter extends Adaptee implements Target {
    @Override
    public void request() {
        // è°ƒç”¨è¢«é€‚é…è€…çš„ç‰¹æ®Šæ–¹æ³•
        specificRequest();
    }
}

// å®¢æˆ·ç«¯ä»£ç 
public class Client {
    public static void main(String[] args) {
        Target target = new ClassAdapter();
        target.request(); // è¾“å‡º: Adaptee: æ‰§è¡Œç‰¹æ®Šè¯·æ±‚
    }
}
```

### 2. å¯¹è±¡é€‚é…å™¨ï¼ˆç»„åˆæ–¹å¼ï¼‰

```java
// ç›®æ ‡æ¥å£
public interface Target {
    void request();
}

// éœ€è¦é€‚é…çš„ç±»
public class Adaptee {
    public void specificRequest() {
        System.out.println("Adaptee: æ‰§è¡Œç‰¹æ®Šè¯·æ±‚");
    }
}

// å¯¹è±¡é€‚é…å™¨ï¼ˆç»„åˆAdapteeå¯¹è±¡ï¼‰
public class ObjectAdapter implements Target {
    private Adaptee adaptee;

    public ObjectAdapter(Adaptee adaptee) {
        this.adaptee = adaptee;
    }

    @Override
    public void request() {
        if (adaptee != null) {
            adaptee.specificRequest();
        }
    }
}

// å®¢æˆ·ç«¯ä»£ç 
public class Client {
    public static void main(String[] args) {
        Adaptee adaptee = new Adaptee();
        Target target = new ObjectAdapter(adaptee);
        target.request(); // è¾“å‡º: Adaptee: æ‰§è¡Œç‰¹æ®Šè¯·æ±‚
    }
}
```

### 3. æ¥å£é€‚é…å™¨ï¼ˆç¼ºçœé€‚é…å™¨ï¼‰

```java
// å¤šä¸ªæ–¹æ³•çš„æ¥å£
public interface MultipleMethodsInterface {
    void method1();
    void method2();
    void method3();
}

// æŠ½è±¡é€‚é…å™¨ç±»ï¼Œç©ºå®ç°æ‰€æœ‰æ–¹æ³•
public abstract class AbstractAdapter implements MultipleMethodsInterface {
    @Override
    public void method1() {}

    @Override
    public void method2() {}

    @Override
    public void method3() {}
}

// å…·ä½“é€‚é…å™¨ï¼Œåªå®ç°éœ€è¦çš„æ–¹æ³•
public class ConcreteAdapter extends AbstractAdapter {
    @Override
    public void method2() {
        System.out.println("åªå®ç°éœ€è¦çš„æ–¹æ³•");
    }
}
```

## ğŸ” æºç åº”ç”¨

### Javaæ ¸å¿ƒåº“
- **`java.util.Arrays.asList()`**ï¼šå°†æ•°ç»„é€‚é…ä¸ºListæ¥å£
- **`java.io.InputStreamReader`**ï¼šå°†InputStreamé€‚é…ä¸ºReader
- **`java.io.OutputStreamWriter`**ï¼šå°†OutputStreamé€‚é…ä¸ºWriter
- **`javax.xml.bind.annotation.adapters.XmlAdapter`**ï¼šXMLåºåˆ—åŒ–å’Œååºåˆ—åŒ–çš„é€‚é…å™¨

### Springæ¡†æ¶
- **`org.springframework.web.servlet.HandlerAdapter`**ï¼šSpring MVCä¸­çš„å¤„ç†å™¨é€‚é…å™¨
- **`org.springframework.jdbc.support.JdbcAccessor`**ï¼šJDBCé€‚é…å™¨
- **`org.springframework.cache.support.NoOpCacheManager`**ï¼šç¼“å­˜é€‚é…å™¨

### MyBatis
- **`org.apache.ibatis.type.TypeAdapter`**ï¼šç±»å‹è½¬æ¢é€‚é…å™¨
- **`org.apache.ibatis.session.Configuration`**ï¼šä¸ºä¸åŒçš„æ—¥å¿—æ¡†æ¶æä¾›é€‚é…å™¨

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **é€‰æ‹©åˆé€‚çš„é€‚é…å™¨ç±»å‹**ï¼š
   - ç±»é€‚é…å™¨ï¼šå½“éœ€è¦ç»§æ‰¿å¤šä¸ªç±»æ—¶ä¸é€‚ç”¨ï¼ˆJavaå•ç»§æ‰¿ï¼‰
   - å¯¹è±¡é€‚é…å™¨ï¼šæ›´çµæ´»ï¼Œç¬¦åˆåˆæˆå¤ç”¨åŸåˆ™
   - æ¥å£é€‚é…å™¨ï¼šå½“æ¥å£æ–¹æ³•è¾ƒå¤šè€Œåªéœ€å®ç°éƒ¨åˆ†æ—¶ä½¿ç”¨

2. **é¿å…è¿‡åº¦ä½¿ç”¨**ï¼šé€‚é…å™¨æ¨¡å¼ä¼šå¢åŠ ç³»ç»Ÿå¤æ‚æ€§ï¼Œå¦‚éå¿…è¦ï¼Œåº”ä¼˜å…ˆè€ƒè™‘é‡æ„è€Œéé€‚é…

3. **å‘½åè§„èŒƒ**ï¼šé€‚é…å™¨ç±»åå»ºè®®ä»¥`Adapter`ç»“å°¾ï¼Œä¾¿äºè¯†åˆ«

4. **è€ƒè™‘é»˜è®¤é€‚é…**ï¼šä¸ºæ¥å£æä¾›é»˜è®¤å®ç°ï¼Œç®€åŒ–é€‚é…å™¨å¼€å‘

5. **åŒå‘é€‚é…**ï¼šå¯ä»¥å®ç°åŒå‘é€‚é…å™¨ï¼Œä½¿ä¸¤ä¸ªä¸å…¼å®¹çš„æ¥å£å¯ä»¥äº’ç›¸è°ƒç”¨

## ğŸ“ æœ€ä½³å®è·µ

1. **å•ä¸€èŒè´£**ï¼šé€‚é…å™¨åº”åªè´Ÿè´£æ¥å£è½¬æ¢ï¼Œä¸åº”æ·»åŠ é¢å¤–ä¸šåŠ¡é€»è¾‘

2. **å¼€é—­åŸåˆ™**ï¼šé€šè¿‡æ–°å¢é€‚é…å™¨æ‰©å±•åŠŸèƒ½ï¼Œè€Œéä¿®æ”¹ç°æœ‰ä»£ç 

3. **é€‚é…æŠ½è±¡**ï¼šå°½é‡é€‚é…æ¥å£æˆ–æŠ½è±¡ç±»ï¼Œè€Œéå…·ä½“å®ç°ç±»

4. **åˆç†ä½¿ç”¨å§”æ‰˜**ï¼šé€‚é…å™¨ä¸­å°½é‡ä½¿ç”¨å§”æ‰˜è€Œéç»§æ‰¿ï¼Œæé«˜çµæ´»æ€§

5. **è®¾è®¡æ¥å£æ—¶é¢„ç•™é€‚é…ç©ºé—´**ï¼šåœ¨ç³»ç»Ÿè®¾è®¡åˆæœŸè€ƒè™‘æœªæ¥å¯èƒ½çš„é€‚é…éœ€æ±‚

## ğŸ“š ç›¸å…³æ¨¡å¼

- **è£…é¥°å™¨æ¨¡å¼**ï¼šé€‚é…å™¨æ”¹å˜æ¥å£ï¼Œè£…é¥°å™¨å¢å¼ºåŠŸèƒ½
- **å¤–è§‚æ¨¡å¼**ï¼šä¸ºå¤æ‚ç³»ç»Ÿæä¾›ç®€åŒ–æ¥å£ï¼Œä¸æ”¹å˜åŸæœ‰æ¥å£
- **æ¡¥æ¥æ¨¡å¼**ï¼šåˆ†ç¦»æŠ½è±¡ä¸å®ç°ï¼Œå…è®¸ä¸¤è€…ç‹¬ç«‹å˜åŒ–
- **ä»£ç†æ¨¡å¼**ï¼šæ§åˆ¶å¯¹è±¡è®¿é—®ï¼Œä¸æ”¹å˜æ¥å£
- **ç­–ç•¥æ¨¡å¼**ï¼šå®šä¹‰ç®—æ³•æ—ï¼Œå…è®¸ç®—æ³•æ›¿æ¢

